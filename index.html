<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>WorkHub - Enterprise Groupware</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
<style>
:root{--bg:#f5f6fa;--bg-card:#fff;--bg-side:#1a1d2e;--bg-input:#f8f9fb;--bd:#e5e7eb;--bd-focus:#6366f1;--t1:#111827;--t2:#6b7280;--t3:#9ca3af;--tw:#fff;--ac:#6366f1;--ac-l:#eef2ff;--ac-d:#4f46e5;--ok:#10b981;--ok-l:#d1fae5;--wn:#f59e0b;--wn-l:#fef3c7;--err:#ef4444;--err-l:#fee2e2;--or:#f97316;--pu:#8b5cf6;--sh:0 1px 3px rgba(0,0,0,.1);--sh-md:0 4px 6px -1px rgba(0,0,0,.1);--sh-lg:0 10px 15px -3px rgba(0,0,0,.1);--sh-xl:0 20px 25px -5px rgba(0,0,0,.1);--r:8px;--rl:12px;--rxl:16px;--ff:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;--hh:60px;--sw:250px;--tr:all .2s cubic-bezier(.4,0,.2,1)}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}html{-webkit-font-smoothing:antialiased}body{font-family:var(--ff);font-size:.875rem;color:var(--t1);background:var(--bg);line-height:1.6;min-height:100vh;overflow-x:hidden}button{font-family:var(--ff);cursor:pointer;border:none;background:none}input,textarea,select{font-family:var(--ff);border:none;outline:none}[hidden]{display:none!important}
@keyframes sU{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:none}}@keyframes sD{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:none}}@keyframes fI{from{opacity:0}to{opacity:1}}@keyframes tI{from{opacity:0;transform:translateX(40px)}to{opacity:1;transform:none}}@keyframes tO{from{opacity:1}to{opacity:0;transform:translateX(40px)}}@keyframes sp{to{transform:rotate(360deg)}}@keyframes pl{0%,100%{opacity:.4}50%{opacity:1}}@keyframes bI{0%{opacity:0;transform:scale(.3)}50%{transform:scale(1.05)}100%{opacity:1;transform:scale(1)}}@keyframes fp{0%,100%{box-shadow:0 4px 20px rgba(99,102,241,.4)}50%{box-shadow:0 4px 20px rgba(99,102,241,.65),0 0 0 10px rgba(99,102,241,.06)}}@keyframes dB{0%,80%,100%{opacity:0}40%{opacity:1}}
.tw{position:fixed;top:16px;right:16px;z-index:99999;display:flex;flex-direction:column;gap:8px;pointer-events:none}.to{pointer-events:auto;display:flex;align-items:center;gap:10px;padding:12px 20px;border-radius:var(--r);font-size:.8125rem;font-weight:500;max-width:380px;box-shadow:var(--sh-lg);animation:tI .3s ease-out both;border-left:4px solid transparent;background:#fff}.to--d{animation:tO .25s ease-in both}.to--ok{color:#065f46;border-left-color:var(--ok)}.to--err{color:#991b1b;border-left-color:var(--err)}.to--info{color:var(--t1);border-left-color:var(--ac)}
.lp{min-height:100vh;display:flex}.lp-l{flex:1;background:linear-gradient(135deg,#1e1b4b,#312e81,#4f46e5);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;position:relative;overflow:hidden}.lp-l::before{content:'';position:absolute;width:500px;height:500px;border-radius:50%;background:rgba(255,255,255,.03);top:-180px;right:-180px}.lp-l::after{content:'';position:absolute;width:350px;height:350px;border-radius:50%;background:rgba(255,255,255,.02);bottom:-80px;left:-80px}.lp-brand{position:relative;z-index:1;text-align:center;color:#fff}.lp-brand h1{font-size:3rem;font-weight:900;letter-spacing:-1.5px;margin-bottom:.5rem}.lp-brand p{font-size:1rem;opacity:.7;letter-spacing:.5px}.lp-feats{position:relative;z-index:1;margin-top:3rem;display:flex;flex-direction:column;gap:1.25rem}.lp-ft{display:flex;align-items:center;gap:12px;color:rgba(255,255,255,.85);font-size:.875rem;font-weight:500}.lp-ft-i{width:40px;height:40px;border-radius:10px;background:rgba(255,255,255,.1);display:flex;align-items:center;justify-content:center;flex-shrink:0}.lp-ft-i svg{width:20px;height:20px;stroke:rgba(255,255,255,.9);fill:none;stroke-width:2}.lp-r{width:480px;display:flex;align-items:center;justify-content:center;padding:3rem;background:#fff}.lp-form{width:100%;max-width:360px}.lp-form h2{font-size:1.75rem;font-weight:800;color:var(--t1);margin-bottom:.5rem}.lp-form>p{color:var(--t2);margin-bottom:2rem;font-size:.9375rem}.bg{width:100%;padding:14px;background:#fff;border:1px solid var(--bd);border-radius:var(--r);font-size:.9375rem;font-weight:600;color:var(--t1);display:flex;align-items:center;justify-content:center;gap:10px;transition:var(--tr)}.bg:hover:not(:disabled){background:var(--bg-input);box-shadow:var(--sh-md);transform:translateY(-1px)}.bg:disabled{opacity:.5;cursor:wait}.bg svg{width:20px;height:20px;flex-shrink:0}.sp{display:inline-block;width:20px;height:20px;border:2.5px solid var(--bd);border-top-color:var(--ac);border-radius:50%;animation:sp .6s linear infinite}.le{margin-top:12px;padding:12px 16px;background:var(--err-l);border:1px solid #fecaca;border-radius:var(--r);font-size:.8125rem;color:#991b1b;display:none;line-height:1.6}.le--s{display:block}.le strong{font-weight:700}.lp-foot{text-align:center;font-size:.75rem;color:var(--t3);margin-top:2rem}
.hd{height:var(--hh);background:#fff;border-bottom:1px solid var(--bd);position:sticky;top:0;z-index:20;box-shadow:0 1px 2px rgba(0,0,0,.05)}.hd-in{max-width:1600px;margin:0 auto;height:100%;padding:0 24px;display:flex;align-items:center;justify-content:space-between}.hd-left{display:flex;align-items:center;gap:16px}.hd-menu{display:none;padding:6px;border-radius:6px;color:var(--t2);transition:var(--tr)}.hd-menu:hover{background:var(--bg-input)}.hd-logo{font-size:1.375rem;font-weight:900;color:var(--ac);letter-spacing:-1px;cursor:pointer;user-select:none}.hd-search{margin-left:24px;position:relative}.hd-search input{width:260px;padding:8px 12px 8px 36px;background:var(--bg-input);border:1px solid var(--bd);border-radius:var(--r);font-size:.8125rem;color:var(--t1);transition:var(--tr)}.hd-search input:focus{border-color:var(--ac);background:#fff;box-shadow:0 0 0 3px rgba(99,102,241,.1)}.hd-search input::placeholder{color:var(--t3)}.hd-search svg{position:absolute;left:10px;top:50%;transform:translateY(-50%);width:16px;height:16px;color:var(--t3);pointer-events:none}.hd-rt{display:flex;align-items:center;gap:8px}.hd-noti{position:relative;width:36px;height:36px;border-radius:var(--r);display:flex;align-items:center;justify-content:center;color:var(--t2);transition:var(--tr)}.hd-noti:hover{background:var(--bg-input)}.hd-noti svg{width:20px;height:20px}.hd-noti-b{position:absolute;top:4px;right:4px;width:8px;height:8px;background:var(--err);border-radius:50%;border:2px solid #fff}.hd-div{width:1px;height:28px;background:var(--bd);margin:0 8px}.hd-prof{display:flex;align-items:center;gap:10px;padding:6px 12px 6px 6px;border-radius:var(--r);transition:var(--tr);cursor:pointer}.hd-prof:hover{background:var(--bg-input)}.hd-av{width:32px;height:32px;border-radius:50%;background:var(--ac-l);display:flex;align-items:center;justify-content:center;overflow:hidden}.hd-av img{width:100%;height:100%;object-fit:cover}.hd-av svg{width:16px;height:16px;color:var(--ac)}.hd-pi{display:flex;flex-direction:column}.hd-pn{font-size:.8125rem;font-weight:600;color:var(--t1);line-height:1.2}.hd-pe{font-size:.6875rem;color:var(--t3);line-height:1.2}.hd-lo{width:36px;height:36px;border-radius:var(--r);display:flex;align-items:center;justify-content:center;color:var(--t3);transition:var(--tr)}.hd-lo:hover{background:var(--err-l);color:var(--err)}.hd-lo svg{width:18px;height:18px}
.al{display:flex;min-height:calc(100vh - var(--hh))}.sb{width:var(--sw);background:var(--bg-side);flex-shrink:0;display:flex;flex-direction:column;padding:20px 12px;overflow-y:auto;transition:transform .3s cubic-bezier(.4,0,.2,1)}.sb-lb{font-size:.6875rem;font-weight:700;color:rgba(255,255,255,.35);text-transform:uppercase;letter-spacing:1.5px;padding:12px 14px 8px;margin-top:4px}.sb-nav{display:flex;flex-direction:column;gap:2px}.sb-lk{display:flex;align-items:center;gap:12px;padding:10px 14px;border-radius:var(--r);font-size:.8125rem;font-weight:500;color:rgba(255,255,255,.6);transition:var(--tr);position:relative}.sb-lk:hover{background:rgba(255,255,255,.07);color:rgba(255,255,255,.9)}.sb-lk--on{background:rgba(99,102,241,.25);color:#fff;font-weight:600}.sb-lk--on::before{content:'';position:absolute;left:0;top:50%;transform:translateY(-50%);width:3px;height:20px;background:var(--ac);border-radius:0 4px 4px 0;animation:barSlide .3s ease-out}
.sb-lk{transform:translateX(0);transition:all .25s cubic-bezier(.4,0,.2,1)}.sb-lk:hover{transform:translateX(6px);background:rgba(255,255,255,.07);color:rgba(255,255,255,.9)}.sb-lk:active{transform:translateX(3px) scale(.98)}
.sb-lk--on{transform:translateX(4px)}
@keyframes barSlide{from{height:0;opacity:0}to{height:20px;opacity:1}}
.sb-nav button:nth-child(1){animation:menuIn .3s ease-out both;animation-delay:.05s}
.sb-nav button:nth-child(2){animation:menuIn .3s ease-out both;animation-delay:.1s}
.sb-nav button:nth-child(3){animation:menuIn .3s ease-out both;animation-delay:.15s}
.sb-nav button:nth-child(4){animation:menuIn .3s ease-out both;animation-delay:.2s}
@keyframes menuIn{from{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}
.sb-lk svg{transition:transform .25s ease}.sb-lk:hover svg{transform:scale(1.15) rotate(-5deg)}
.sb-lk--on svg{animation:iconPop .3s ease-out}
@keyframes iconPop{0%{transform:scale(1)}50%{transform:scale(1.25) rotate(-8deg)}100%{transform:scale(1)}}
@keyframes menuFlash{0%{background:rgba(99,102,241,.5);transform:translateX(10px)}50%{background:rgba(99,102,241,.35)}100%{background:rgba(99,102,241,.25);transform:translateX(4px)}}
.sb-lb{animation:menuIn .3s ease-out both}.sb-lk svg{width:18px;height:18px;flex-shrink:0;opacity:.7;fill:none;stroke:currentColor;stroke-width:2}.sb-lk--on svg{opacity:1}.sb-lk .bdg{margin-left:auto;padding:2px 8px;border-radius:10px;font-size:.6875rem;font-weight:700;background:var(--err);color:#fff;line-height:1.4}.sb-bt{margin-top:auto;padding:12px;border-top:1px solid rgba(255,255,255,.08)}.sb-bt-c{display:flex;align-items:center;gap:10px;padding:10px;background:rgba(255,255,255,.05);border-radius:var(--r);cursor:pointer;transition:var(--tr)}.sb-bt-c:hover{background:rgba(255,255,255,.1)}.sb-bt-av{width:34px;height:34px;border-radius:50%;background:var(--ac);display:flex;align-items:center;justify-content:center;color:#fff;font-size:.75rem;font-weight:700;flex-shrink:0}.sb-bt-nm{font-size:.8125rem;font-weight:600;color:rgba(255,255,255,.85);line-height:1.2}.sb-bt-em{font-size:.6875rem;color:rgba(255,255,255,.4);line-height:1.2;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:140px}.sb-ov{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:29}
.mn{flex:1;padding:28px 32px;max-width:1200px;min-width:0;animation:fI .3s ease-out}.ph{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.pt{font-size:1.5rem;font-weight:800;color:var(--t1);letter-spacing:-.5px}.bc{display:flex;align-items:center;gap:6px;font-size:.75rem;color:var(--t3);margin-bottom:4px}.bc a{color:var(--t2);transition:color .15s;cursor:pointer}.bc a:hover{color:var(--ac)}
.cd{background:var(--bg-card);border-radius:var(--rl);border:1px solid var(--bd);box-shadow:0 1px 2px rgba(0,0,0,.05);transition:var(--tr)}.cd:hover{box-shadow:var(--sh)}.cd-b{padding:20px 24px}.cd-h{padding:16px 24px;border-bottom:1px solid var(--bd);display:flex;justify-content:space-between;align-items:center}.cd-h h3{font-size:1rem;font-weight:700;color:var(--t1)}
.sr{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:24px}.sc{background:#fff;border-radius:var(--rl);border:1px solid var(--bd);padding:20px 24px;box-shadow:0 1px 2px rgba(0,0,0,.05);transition:var(--tr);position:relative;overflow:hidden}.sc:hover{box-shadow:var(--sh-md);transform:translateY(-2px)}.sc::after{content:'';position:absolute;top:0;right:0;width:80px;height:80px;border-radius:50%;opacity:.06;transform:translate(20px,-20px)}.sc:nth-child(1)::after{background:var(--ac)}.sc:nth-child(2)::after{background:var(--ok)}.sc:nth-child(3)::after{background:var(--wn)}.sc:nth-child(4)::after{background:var(--pu)}.sc-t{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.sc-lb{font-size:.75rem;font-weight:600;color:var(--t2);text-transform:uppercase;letter-spacing:.5px}.sc-ic{width:40px;height:40px;border-radius:var(--r);display:flex;align-items:center;justify-content:center}.sc-ic svg{width:20px;height:20px;fill:none;stroke:currentColor;stroke-width:2}.sc-ic--a{background:var(--ac-l);color:var(--ac)}.sc-ic--o{background:var(--ok-l);color:var(--ok)}.sc-ic--w{background:var(--wn-l);color:var(--wn)}.sc-ic--p{background:#ede9fe;color:var(--pu)}.sc-v{font-size:1.75rem;font-weight:800;color:var(--t1);letter-spacing:-1px;line-height:1}.sc-ch{display:inline-flex;align-items:center;gap:3px;font-size:.75rem;font-weight:600;margin-top:8px;padding:2px 8px;border-radius:20px;background:var(--ok-l);color:#065f46}
.dg{display:grid;grid-template-columns:1fr 1fr;gap:20px}.rl{display:flex;flex-direction:column;gap:2px}.rr{display:flex;align-items:center;gap:12px;padding:12px 16px;border-radius:var(--r);transition:var(--tr);cursor:pointer}.rr:hover{background:var(--bg-input)}.rd{width:8px;height:8px;border-radius:50%;flex-shrink:0}.rd--a{background:var(--ac)}.rd--o{background:var(--ok)}.rd--w{background:var(--wn)}.rd--e{background:var(--err)}.ri{flex:1;min-width:0}.ri-t{font-size:.8125rem;font-weight:600;color:var(--t1);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ri-s{font-size:.75rem;color:var(--t3);margin-top:1px}.ri-tm{font-size:.6875rem;color:var(--t3);white-space:nowrap}.qg{display:grid;grid-template-columns:1fr 1fr;gap:10px}.qc{display:flex;flex-direction:column;align-items:center;gap:8px;padding:20px 12px;background:var(--bg-input);border:1px solid var(--bd);border-radius:var(--rl);transition:var(--tr);cursor:pointer}.qc:hover{border-color:var(--ac);background:var(--ac-l);transform:translateY(-2px);box-shadow:var(--sh-md)}.qc-i{width:44px;height:44px;border-radius:var(--r);display:flex;align-items:center;justify-content:center}.qc-i svg{width:22px;height:22px;fill:none;stroke:currentColor;stroke-width:2}.qc span{font-size:.75rem;font-weight:600;color:var(--t2)}.qc:hover span{color:var(--ac)}
.btn{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border-radius:var(--r);font-size:.8125rem;font-weight:600;transition:var(--tr);white-space:nowrap}.btn svg{width:16px;height:16px;fill:none;stroke:currentColor;stroke-width:2}.btn-p{background:var(--ac);color:#fff;box-shadow:0 1px 2px rgba(99,102,241,.3)}.btn-p:hover{background:var(--ac-d);box-shadow:0 4px 12px rgba(99,102,241,.3);transform:translateY(-1px)}.btn-o{background:#fff;color:var(--t2);border:1px solid var(--bd)}.btn-o:hover{border-color:var(--ac);color:var(--ac);background:var(--ac-l)}.btn-d{background:var(--err);color:#fff}.btn-d:hover{background:#dc2626}.bi{width:32px;height:32px;border-radius:6px;display:flex;align-items:center;justify-content:center;color:var(--t3);transition:var(--tr)}.bi:hover{background:var(--bg-input);color:var(--t1)}.bi svg{width:16px;height:16px;fill:none;stroke:currentColor;stroke-width:2}.bi-e{color:var(--ac)}.bi-e:hover{background:var(--ac-l)}.bi-d{color:var(--err)}.bi-d:hover{background:var(--err-l)}
.nl{display:flex;flex-direction:column;gap:12px}.nc{background:#fff;border:1px solid var(--bd);border-radius:var(--rl);padding:20px 24px;box-shadow:0 1px 2px rgba(0,0,0,.05);transition:var(--tr)}.nc:hover{box-shadow:var(--sh-md)}.nc-top{display:flex;justify-content:space-between;align-items:flex-start}.nc-body{flex:1;min-width:0}.nc-tl{font-size:1.0625rem;font-weight:700;color:var(--t1);margin-bottom:6px}.nc-ct{font-size:.8125rem;color:var(--t2);line-height:1.7;white-space:pre-wrap}.nc-act{display:flex;gap:4px;flex-shrink:0;margin-left:12px}.nc-mt{display:flex;align-items:center;gap:16px;font-size:.75rem;color:var(--t3);margin-top:16px;padding-top:12px;border-top:1px solid var(--bd)}.nc-mt span{display:flex;align-items:center;gap:4px}.nc-mt svg{width:14px;height:14px;fill:none;stroke:currentColor;stroke-width:2}.es{text-align:center;padding:60px 24px}.es svg{width:56px;height:56px;color:var(--t3);margin:0 auto 12px;fill:none;stroke:currentColor;stroke-width:1.5}.es p{font-size:1rem;font-weight:600;color:var(--t2)}.es span{font-size:.8125rem;color:var(--t3);display:block;margin-top:4px}
.mo{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;padding:16px;z-index:50;animation:fI .15s ease-out}.mo-bx{width:100%;max-width:560px;background:#fff;border-radius:var(--rxl);box-shadow:var(--sh-xl);animation:sD .2s ease-out;overflow:hidden}.mo-hd{padding:20px 24px;border-bottom:1px solid var(--bd);display:flex;justify-content:space-between;align-items:center}.mo-hd h3{font-size:1.125rem;font-weight:700}.mo-bd{padding:24px}.mo-ft{padding:16px 24px;border-top:1px solid var(--bd);display:flex;justify-content:flex-end;gap:8px;background:var(--bg-input)}.fg{margin-bottom:16px}.fg:last-child{margin-bottom:0}.fl{display:block;font-size:.8125rem;font-weight:600;color:var(--t1);margin-bottom:6px}.fi{width:100%;padding:10px 14px;background:var(--bg-input);border:1px solid var(--bd);border-radius:var(--r);font-size:.8125rem;color:var(--t1);transition:var(--tr)}.fi::placeholder{color:var(--t3)}.fi:focus{border-color:var(--bd-focus);background:#fff;box-shadow:0 0 0 3px rgba(99,102,241,.1)}textarea.fi{resize:vertical;min-height:140px;line-height:1.7}select.fi{cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%239ca3af' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 14px center}
.db{background:linear-gradient(135deg,#ea580c,#dc2626,#db2777);border-radius:var(--rxl);padding:28px 32px;color:#fff;margin-bottom:24px;position:relative;overflow:hidden}.db::before{content:'';position:absolute;top:-40%;right:-10%;width:250px;height:250px;background:rgba(255,255,255,.07);border-radius:50%}.db h2{font-size:1.5rem;font-weight:800;position:relative;z-index:1}.db p{font-size:.875rem;opacity:.85;position:relative;z-index:1;margin-top:4px}.dg2{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.fgr{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}.fc{display:flex;flex-direction:column;align-items:center;gap:6px;padding:14px 8px;background:#fff;border:2px solid var(--bd);border-radius:var(--rl);cursor:pointer;transition:var(--tr);font-size:.75rem;font-weight:500;color:var(--t2)}.fc:hover{border-color:var(--or);color:var(--or);transform:translateY(-2px)}.fc--on{border-color:var(--or);background:#fff7ed;color:var(--or);font-weight:700;box-shadow:0 4px 12px rgba(249,115,22,.15)}.fc-i{font-size:1.5rem;line-height:1}.fc-n{line-height:1.2;text-align:center}.pb{display:flex;gap:8px;flex-wrap:wrap}.pp{padding:8px 16px;background:#fff;border:2px solid var(--bd);border-radius:var(--r);font-size:.8125rem;font-weight:500;color:var(--t2);transition:var(--tr);cursor:pointer}.pp:hover{border-color:var(--ac);color:var(--ac)}.pp--on{border-color:var(--ac);background:var(--ac-l);color:var(--ac);font-weight:700}.dsb{width:100%;padding:14px;background:linear-gradient(135deg,#ea580c,#dc2626);border-radius:var(--rl);color:#fff;font-size:1rem;font-weight:700;display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 4px 15px rgba(234,88,12,.3);transition:var(--tr);margin-top:20px}.dsb:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(234,88,12,.4)}.dsb:disabled{opacity:.5;transform:none}.dsb svg{width:20px;height:20px;fill:none;stroke:currentColor;stroke-width:2}
.dlc{margin-top:24px}.dlh{display:flex;justify-content:space-between;align-items:center}.dls{display:flex;gap:16px;margin:16px 0}.dls-i{padding:12px 20px;background:var(--bg-input);border-radius:var(--r);text-align:center;flex:1}.dls-v{font-size:1.25rem;font-weight:800;color:var(--t1)}.dls-l{font-size:.6875rem;color:var(--t3);margin-top:2px}.dlf{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:16px}.dlf-i{padding:5px 12px;border-radius:20px;font-size:.75rem;font-weight:600;background:var(--bg-input);color:var(--t2);transition:var(--tr);cursor:pointer;border:1px solid transparent}.dlf-i:hover{border-color:var(--ac);color:var(--ac)}.dlf-i--on{background:var(--ac);color:#fff;border-color:var(--ac)}.dll{display:flex;flex-direction:column;gap:10px}.dli{display:flex;align-items:center;gap:14px;padding:14px 18px;background:var(--bg-input);border-radius:var(--rl);transition:var(--tr)}.dli:hover{background:#fff;box-shadow:var(--sh)}.dli-e{font-size:1.5rem;flex-shrink:0}.dli-inf{flex:1;min-width:0}.dli-nm{font-size:.875rem;font-weight:700;color:var(--t1)}.dli-mt{font-size:.75rem;color:var(--t3);margin-top:2px;display:flex;gap:10px;flex-wrap:wrap}.dli-st{color:var(--wn);font-size:.75rem;letter-spacing:1px}.dli-act{display:flex;gap:4px;flex-shrink:0}.dli-nv{padding:4px 10px;border-radius:20px;background:#03c75a;color:#fff;font-size:.6875rem;font-weight:700;transition:var(--tr);cursor:pointer;border:none}.dli-nv:hover{background:#02b351}.dle{text-align:center;padding:40px 20px;color:var(--t3)}.dle p{font-size:.875rem}
#cb{position:fixed;bottom:24px;right:24px;z-index:9990;display:flex;flex-direction:column;align-items:flex-end}.cb-f{width:56px;height:56px;border-radius:50%;background:var(--ac);color:#fff;box-shadow:0 4px 20px rgba(99,102,241,.4);font-size:1.25rem;display:flex;align-items:center;justify-content:center;transition:var(--tr);animation:fp 3s ease-in-out infinite;position:relative}.cb-f:hover{transform:scale(1.1);box-shadow:0 8px 30px rgba(99,102,241,.5)}.cb-bg{position:absolute;top:-2px;right:-2px;width:20px;height:20px;background:var(--err);border-radius:50%;font-size:.65rem;font-weight:700;color:#fff;display:flex;align-items:center;justify-content:center;border:2px solid #fff;animation:bI .3s ease-out}.cb-tp{position:absolute;right:calc(100% + 12px);top:50%;transform:translateY(-50%);background:var(--bg-side);color:#fff;padding:8px 14px;border-radius:var(--r);font-size:.75rem;font-weight:500;white-space:nowrap;box-shadow:var(--sh-lg);animation:fI .3s;pointer-events:none}.cb-tp::after{content:'';position:absolute;top:50%;right:-6px;transform:translateY(-50%);border:6px solid transparent;border-left-color:var(--bg-side)}.cb-w{width:400px;max-height:580px;background:#fff;border-radius:var(--rxl);box-shadow:var(--sh-xl);border:1px solid var(--bd);display:none;flex-direction:column;overflow:hidden;margin-bottom:10px;animation:sU .25s ease-out}.cb-w--o{display:flex}.cb-hd{padding:16px 20px;background:var(--ac);color:#fff;display:flex;justify-content:space-between;align-items:center;flex-shrink:0}.cb-hd-l{display:flex;align-items:center;gap:10px}.cb-hd-av{width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,.2);display:flex;align-items:center;justify-content:center;font-size:1rem}.cb-hd-i h4{font-size:.875rem;font-weight:700}.cb-hd-i span{font-size:.6875rem;opacity:.8;display:flex;align-items:center;gap:4px}.cb-hd-i span::before{content:'';width:6px;height:6px;border-radius:50%;background:#4ade80}.cb-cl{color:#fff;font-size:1.25rem;padding:4px 8px;border-radius:6px;cursor:pointer;transition:var(--tr)}.cb-cl:hover{background:rgba(255,255,255,.15)}.cb-ms{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:8px;max-height:340px;min-height:240px;scrollbar-width:thin;scrollbar-color:var(--bd) transparent}.cb-ms::-webkit-scrollbar{width:4px}.cb-ms::-webkit-scrollbar-thumb{background:var(--bd);border-radius:2px}.cb-m{max-width:85%;animation:sU .2s ease-out}.cb-m--b{align-self:flex-start}.cb-m--u{align-self:flex-end}.cb-bb{padding:10px 14px;border-radius:var(--rl);font-size:.8125rem;line-height:1.65;word-break:break-word}.cb-m--b .cb-bb{background:var(--bg-input);color:var(--t1);border-bottom-left-radius:4px}.cb-m--u .cb-bb{background:var(--ac);color:#fff;border-bottom-right-radius:4px}.cb-tm{font-size:.625rem;color:var(--t3);margin-top:2px;padding:0 4px}.cb-m--u .cb-tm{text-align:right}.cb-bb b{font-weight:700}.cb-ty{align-self:flex-start;display:flex;gap:4px;padding:10px 14px}.cb-ty span{width:7px;height:7px;border-radius:50%;background:var(--t3);animation:dB 1.4s infinite}.cb-ty span:nth-child(2){animation-delay:.2s}.cb-ty span:nth-child(3){animation-delay:.4s}.cb-sg{display:flex;flex-wrap:wrap;gap:6px;padding:10px 16px;border-top:1px solid var(--bd);background:var(--bg-input);flex-shrink:0}.cb-sg-b{padding:5px 12px;background:#fff;border:1px solid var(--bd);border-radius:20px;font-size:.6875rem;color:var(--t2);font-weight:500;transition:var(--tr);cursor:pointer}.cb-sg-b:hover{border-color:var(--ac);color:var(--ac);background:var(--ac-l)}.cb-ia{padding:12px;border-top:1px solid var(--bd);display:flex;gap:8px;background:#fff;flex-shrink:0}.cb-in{flex:1;padding:10px 14px;border:1.5px solid var(--bd);border-radius:var(--r);font-size:.8125rem;background:var(--bg-input);transition:var(--tr)}.cb-in:focus{border-color:var(--ac);background:#fff}.cb-sn{padding:10px 16px;background:var(--ac);color:#fff;border-radius:var(--r);font-size:.8125rem;font-weight:600;transition:var(--tr);display:flex;align-items:center;gap:4px;cursor:pointer}.cb-sn:hover{background:var(--ac-d);box-shadow:0 2px 8px rgba(99,102,241,.3)}.cb-sn:disabled{opacity:.4;cursor:not-allowed}.cb-sn svg{width:14px;height:14px;fill:none;stroke:currentColor;stroke-width:2}
@media(max-width:1024px){.sr{grid-template-columns:repeat(2,1fr)}.fgr{grid-template-columns:repeat(3,1fr)}.dg{grid-template-columns:1fr}.hd-search{display:none}}
@media(max-width:768px){.hd-menu{display:block}.sb{position:fixed;top:var(--hh);left:0;bottom:0;z-index:30;transform:translateX(-100%)}.sb--op{transform:translateX(0)}.sb-ov--s{display:block}.mn{padding:16px}.sr{grid-template-columns:1fr 1fr}.dg2{grid-template-columns:1fr}.fgr{grid-template-columns:repeat(3,1fr)}.lp{flex-direction:column}.lp-l{padding:2rem;min-height:auto}.lp-feats{display:none}.lp-r{width:100%;padding:2rem}.lp-brand h1{font-size:2.25rem}.cb-w{width:calc(100vw - 32px);max-height:calc(100vh - 100px)}#cb{bottom:16px;right:16px}.hd-pi{display:none}}
@media(max-width:480px){.sr{grid-template-columns:1fr}.fgr{grid-template-columns:repeat(2,1fr)}.pb{gap:6px}.pp{padding:6px 12px;font-size:.75rem}}
</style>
</head>
<body>
<div id="tw" class="tw" aria-live="polite"></div>

<div id="pgLogin" class="lp">
  <div class="lp-l">
    <div class="lp-brand"><h1>WorkHub</h1><p>Enterprise Smart Groupware</p></div>
    <div class="lp-feats">
      <div class="lp-ft"><div class="lp-ft-i"><svg viewBox="0 0 24 24"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg></div><span>ì‹¤ì‹œê°„ ê³µì§€ì‚¬í•­ ê´€ë¦¬</span></div>
      <div class="lp-ft"><div class="lp-ft-i"><svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4-4v2"/><circle cx="9" cy="7" r="4"/></svg></div><span>íŒ€ íšŒì‹ ì¥ì†Œ ê²€ìƒ‰ & ê¸°ë¡</span></div>
      <div class="lp-ft"><div class="lp-ft-i"><svg viewBox="0 0 24 24"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg></div><span>AI ì–´ì‹œìŠ¤í„´íŠ¸ ì±—ë´‡</span></div>
    </div>
  </div>
  <div class="lp-r">
    <div class="lp-form">
      <h2>ë¡œê·¸ì¸</h2>
      <p>Google ê³„ì •ìœ¼ë¡œ ì‹œì‘í•˜ì„¸ìš”</p>
      <button id="btnG" class="bg" onclick="App.auth.loginGoogle()">
        <svg viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
        <span id="btnGT">Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸</span>
      </button>
      <div id="lErr" class="le"></div>
      <p class="lp-foot">ì•ˆì „í•œ Google OAuth 2.0 ì¸ì¦</p>
    </div>
  </div>
</div>

<div id="app" hidden>
  <header class="hd"><div class="hd-in">
    <div class="hd-left">
      <button class="hd-menu" onclick="App.ui.togSb()" aria-label="ë©”ë‰´"><svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button>
      <span class="hd-logo" onclick="App.rt.go('dash')">WorkHub</span>
      <div class="hd-search"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg><input placeholder="ê²€ìƒ‰..." onkeydown="if(event.key==='Enter')App.ui.search(this.value)"></div>
    </div>
    <div class="hd-rt">
      <button class="hd-noti" onclick="App.rt.go('notices')" title="ê³µì§€ì‚¬í•­"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg><span id="nBdg" class="hd-noti-b" style="display:none"></span></button>
      <div class="hd-div"></div>
      <div class="hd-prof" onclick="App.rt.go('dash')"><div class="hd-av" id="hAv"></div><div class="hd-pi"><div class="hd-pn" id="hNm"></div><div class="hd-pe" id="hEm"></div></div></div>
      <button class="hd-lo" onclick="App.auth.logout()" title="ë¡œê·¸ì•„ì›ƒ"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg></button>
    </div>
  </div></header>
  <div class="al">
    <div id="sbOv" class="sb-ov" onclick="App.ui.closeSb()"></div>
    <aside id="sb" class="sb">
      <div class="sb-lb">ë©”ì¸ ë©”ë‰´</div>
      <nav class="sb-nav">
        <button class="sb-lk sb-lk--on" data-pg="dash" onclick="App.rt.go('dash')"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg><span>ëŒ€ì‹œë³´ë“œ</span></button>
        <button class="sb-lk" data-pg="notices" onclick="App.rt.go('notices')"><svg viewBox="0 0 24 24"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg><span>ê³µì§€ì‚¬í•­</span><span class="bdg" id="nBdg2" style="display:none">0</span></button>
        <button class="sb-lk" data-pg="dining" onclick="App.rt.go('dining')"><svg viewBox="0 0 24 24"><path d="M18 8h1a4 4 0 010 8h-1"/><path d="M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8z"/><line x1="6" y1="1" x2="6" y2="4"/><line x1="10" y1="1" x2="10" y2="4"/><line x1="14" y1="1" x2="14" y2="4"/></svg><span>íšŒì‹ ì°¾ê¸°</span></button>
      </nav>
      <div class="sb-lb" style="margin-top:16px">ë„êµ¬</div>
      <nav class="sb-nav">
        <button class="sb-lk" data-pg="chatbot" onclick="App.chat.tog()"><svg viewBox="0 0 24 24"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg><span>AI ì–´ì‹œìŠ¤í„´íŠ¸</span></button>
      </nav>
      $('sNm').textContent=nm;$('sEm').textContent=u.email;$('sAv').textContent=nm.charAt(0).toUpperCase();    </aside>
    <main class="mn">
      <section id="pgDash">
        <div class="ph"><div><div class="bc"><a onclick="App.rt.go('dash')">í™ˆ</a> / <span>ëŒ€ì‹œë³´ë“œ</span></div><h2 class="pt">ëŒ€ì‹œë³´ë“œ</h2></div></div>
        <div class="sr" id="statR">
          <div class="sc"><div class="sc-t"><span class="sc-lb">ì „ì²´ ê³µì§€</span><div class="sc-ic sc-ic--a"><svg viewBox="0 0 24 24"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/></svg></div></div><div class="sc-v" id="stN">0</div><div class="sc-ch">ì‹¤ì‹œê°„</div></div>
          <div class="sc"><div class="sc-t"><span class="sc-lb">íšŒì‹ ì´ë ¥</span><div class="sc-ic sc-ic--o"><svg viewBox="0 0 24 24"><path d="M18 8h1a4 4 0 010 8h-1"/><path d="M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8z"/></svg></div></div><div class="sc-v" id="stD">0</div><div class="sc-ch">ëˆ„ì </div></div>
          <div class="sc"><div class="sc-t"><span class="sc-lb">í‰ê·  í‰ì </span><div class="sc-ic sc-ic--w"><svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg></div></div><div class="sc-v" id="stR">-</div><div class="sc-ch">íšŒì‹ í‰ì </div></div>
          <div class="sc"><div class="sc-t"><span class="sc-lb">AI ì±—ë´‡</span><div class="sc-ic sc-ic--p"><svg viewBox="0 0 24 24"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg></div></div><div class="sc-v">ON</div><div class="sc-ch">í™œì„±</div></div>
        </div>
        <div class="dg">
          <div class="cd"><div class="cd-h"><h3>ìµœê·¼ ê³µì§€ì‚¬í•­</h3><button class="btn btn-o" onclick="App.rt.go('notices')"><svg viewBox="0 0 24 24"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>ì „ì²´ë³´ê¸°</button></div><div class="cd-b"><div id="dN" class="rl"><p style="color:var(--t3);text-align:center;padding:20px;font-size:.8125rem">ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤</p></div></div></div>
          <div class="cd"><div class="cd-h"><h3>ë¹ ë¥¸ ì‹¤í–‰</h3></div><div class="cd-b"><div class="qg">
            <div class="qc" onclick="App.rt.go('notices');setTimeout(()=>App.notices.openM(),200)"><div class="qc-i" style="background:var(--ac-l);color:var(--ac)"><svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg></div><span>ê³µì§€ ë“±ë¡</span></div>
            <div class="qc" onclick="App.rt.go('dining')"><div class="qc-i" style="background:#fff7ed;color:var(--or)"><svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg></div><span>íšŒì‹ ì°¾ê¸°</span></div>
            <div class="qc" onclick="App.dl.open()"><div class="qc-i" style="background:var(--ok-l);color:var(--ok)"><svg viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></div><span>íšŒì‹ ë“±ë¡</span></div>
          </div></div></div>
        </div>
      </section>
      <section id="pgNotices" hidden>
        <div class="ph"><div><div class="bc"><a onclick="App.rt.go('dash')">í™ˆ</a> / <span>ê³µì§€ì‚¬í•­</span></div><h2 class="pt">ê³µì§€ì‚¬í•­</h2></div><button class="btn btn-p" onclick="App.notices.openM()"><svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>ìƒˆ ê³µì§€ ë“±ë¡</button></div>
        <div id="nList" class="nl"></div>
      </section>
      <section id="pgDining" hidden>
        <div class="ph"><div><div class="bc"><a onclick="App.rt.go('dash')">í™ˆ</a> / <span>íšŒì‹ ì°¾ê¸°</span></div><h2 class="pt">íšŒì‹ ì°¾ê¸°</h2></div></div>
        <div class="db"><h2>ğŸ½ï¸ ì™„ë²½í•œ íšŒì‹ ì¥ì†Œë¥¼ ì°¾ì•„ë³´ì„¸ìš”</h2><p>ì§€ì—­, ì¸ì›, ìŒì‹ì„ ì„ íƒí•˜ë©´ ë„¤ì´ë²„ ì§€ë„ì—ì„œ ë°”ë¡œ ê²€ìƒ‰ë©ë‹ˆë‹¤</p></div>
        <div class="cd" style="margin-bottom:24px"><div class="cd-b">
          <div class="dg2">
            <div class="fg"><label class="fl">ğŸ“ ì§€ì—­ ì„ íƒ</label><select id="dArea" class="fi"><option value="">ì§€ì—­ì„ ì„ íƒí•˜ì„¸ìš”</option><option>ê°•ë‚¨êµ¬</option><option>ê°•ë™êµ¬</option><option>ê°•ë¶êµ¬</option><option>ê°•ì„œêµ¬</option><option>ê´€ì•…êµ¬</option><option>ê´‘ì§„êµ¬</option><option>êµ¬ë¡œêµ¬</option><option>ê¸ˆì²œêµ¬</option><option>ë…¸ì›êµ¬</option><option>ë„ë´‰êµ¬</option><option>ë™ëŒ€ë¬¸êµ¬</option><option>ë™ì‘êµ¬</option><option>ë§ˆí¬êµ¬</option><option>ì„œëŒ€ë¬¸êµ¬</option><option>ì„œì´ˆêµ¬</option><option>ì„±ë™êµ¬</option><option>ì„±ë¶êµ¬</option><option>ì†¡íŒŒêµ¬</option><option>ì–‘ì²œêµ¬</option><option>ì˜ë“±í¬êµ¬</option><option>ìš©ì‚°êµ¬</option><option>ì€í‰êµ¬</option><option>ì¢…ë¡œêµ¬</option><option>ì¤‘êµ¬</option><option>ì¤‘ë‘êµ¬</option></select></div>
            <div class="fg"><label class="fl">ğŸ‘¥ ì¸ì› ìˆ˜</label><div class="pb" id="pBtns"><button class="pp" onclick="App.din.setP(this,'2~4ëª…')">2~4ëª…</button><button class="pp" onclick="App.din.setP(this,'5~8ëª…')">5~8ëª…</button><button class="pp" onclick="App.din.setP(this,'9~15ëª…')">9~15ëª…</button><button class="pp" onclick="App.din.setP(this,'16~20ëª…')">16~20ëª…</button><button class="pp" onclick="App.din.setP(this,'20ëª…+')">20ëª…+</button></div></div>
          </div>
          <div class="fg"><label class="fl">ğŸ´ ìŒì‹ ì¢…ë¥˜</label><div class="fgr" id="fGrid"></div></div>
          <button class="dsb" onclick="App.din.search()"><svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>ë„¤ì´ë²„ ì§€ë„ì—ì„œ ê²€ìƒ‰í•˜ê¸°</button>
        </div></div>
        <div class="cd dlc"><div class="cd-h dlh"><h3>ğŸ“‹ íšŒì‹ ì´ë ¥</h3><button class="btn btn-p" onclick="App.dl.open()"><svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>íšŒì‹ ë“±ë¡</button></div><div class="cd-b"><div id="dlS" class="dls"></div><div id="dlF" class="dlf"></div><div id="dlL" class="dll"></div></div></div>
      </section>
    </main>
  </div>
</div>

<div id="mN" hidden><div class="mo" onclick="if(event.target===this)App.notices.closeM()"><div class="mo-bx">
  <div class="mo-hd"><h3 id="mNT">ê³µì§€ì‚¬í•­ ë“±ë¡</h3><button class="bi" onclick="App.notices.closeM()"><svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button></div>
  <div class="mo-bd">
    <div class="fg"><label class="fl">ì œëª©</label><input id="nIT" class="fi" placeholder="ê³µì§€ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"></div>
    <div class="fg"><label class="fl">ë‚´ìš©</label><textarea id="nIC" class="fi" placeholder="ê³µì§€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea></div>
    <div class="fg"><label class="fl">ì¤‘ìš”ë„</label><select id="nIP" class="fi"><option value="normal">ì¼ë°˜</option><option value="important">ì¤‘ìš”</option><option value="urgent">ê¸´ê¸‰</option></select></div>
  </div>
  <div class="mo-ft"><button class="btn btn-o" onclick="App.notices.closeM()">ì·¨ì†Œ</button><button class="btn btn-p" id="nSB" onclick="App.notices.save()">ë“±ë¡</button></div>
</div></div></div>

<div id="mDL" hidden><div class="mo" onclick="if(event.target===this)App.dl.close()"><div class="mo-bx">
  <div class="mo-hd"><h3 id="dlMT">íšŒì‹ ë“±ë¡</h3><button class="bi" onclick="App.dl.close()"><svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button></div>
  <div class="mo-bd">
    <div class="fg"><label class="fl">ìŒì‹ì ëª… *</label><input id="dlN" class="fi" placeholder="ì˜ˆ: ê°•ë‚¨ ê³ ê¸°ì§‘"></div>
    <div class="dg2">
      <div class="fg"><label class="fl">ì§€ì—­</label><select id="dlA" class="fi"><option value="">ì„ íƒ</option><option>ê°•ë‚¨êµ¬</option><option>ê°•ë™êµ¬</option><option>ê°•ë¶êµ¬</option><option>ê°•ì„œêµ¬</option><option>ê´€ì•…êµ¬</option><option>ê´‘ì§„êµ¬</option><option>êµ¬ë¡œêµ¬</option><option>ê¸ˆì²œêµ¬</option><option>ë…¸ì›êµ¬</option><option>ë„ë´‰êµ¬</option><option>ë™ëŒ€ë¬¸êµ¬</option><option>ë™ì‘êµ¬</option><option>ë§ˆí¬êµ¬</option><option>ì„œëŒ€ë¬¸êµ¬</option><option>ì„œì´ˆêµ¬</option><option>ì„±ë™êµ¬</option><option>ì„±ë¶êµ¬</option><option>ì†¡íŒŒêµ¬</option><option>ì–‘ì²œêµ¬</option><option>ì˜ë“±í¬êµ¬</option><option>ìš©ì‚°êµ¬</option><option>ì€í‰êµ¬</option><option>ì¢…ë¡œêµ¬</option><option>ì¤‘êµ¬</option><option>ì¤‘ë‘êµ¬</option></select></div>
      <div class="fg"><label class="fl">ìŒì‹ ì¢…ë¥˜</label><select id="dlFd" class="fi"><option value="">ì„ íƒ</option><option>í•œì‹</option><option>ê³ ê¸°/êµ¬ì´</option><option>ì¤‘ì‹</option><option>ì¼ì‹</option><option>ì–‘ì‹</option><option>ì¹˜í‚¨</option><option>í•´ì‚°ë¬¼</option><option>ë¶„ì‹</option><option>ì•„ì‹œì•ˆ</option><option>ë·”í˜</option><option>ìˆ ì§‘/í˜¸í”„</option><option>ì¹´í˜</option><option>ê¸°íƒ€</option></select></div>
    </div>
    <div class="dg2">
      <div class="fg"><label class="fl">ì¸ì›</label><input id="dlP" type="number" class="fi" placeholder="ì˜ˆ: 8" min="1"></div>
      <div class="fg"><label class="fl">ë‚ ì§œ</label><input id="dlDt" type="date" class="fi"></div>
    </div>
    <div class="fg"><label class="fl">í‰ì </label><div id="dlSt" style="display:flex;gap:4px;font-size:1.5rem;cursor:pointer"><span onclick="App.dl.setR(1)">â˜†</span><span onclick="App.dl.setR(2)">â˜†</span><span onclick="App.dl.setR(3)">â˜†</span><span onclick="App.dl.setR(4)">â˜†</span><span onclick="App.dl.setR(5)">â˜†</span></div></div>
    <div class="fg"><label class="fl">ë©”ëª¨</label><textarea id="dlMm" class="fi" rows="2" placeholder="ê°„ë‹¨í•œ ë©”ëª¨ (ì„ íƒ)"></textarea></div>
  </div>
  <div class="mo-ft"><button class="btn btn-o" onclick="App.dl.close()">ì·¨ì†Œ</button><button class="btn btn-p" onclick="App.dl.save()">ì €ì¥</button></div>
</div></div></div>

<div id="mCf" hidden><div class="mo" onclick="if(event.target===this)App.ui.closeCf()"><div class="mo-bx" style="max-width:400px">
  <div class="mo-hd"><h3>í™•ì¸</h3></div>
  <div class="mo-bd"><p id="cfMsg" style="font-size:.9375rem;color:var(--t2)">ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p></div>
  <div class="mo-ft"><button class="btn btn-o" onclick="App.ui.closeCf()">ì·¨ì†Œ</button><button class="btn btn-d" id="cfOk">í™•ì¸</button></div>
</div></div></div>

<div id="cb" style="display:none">
  <div class="cb-w" id="cbW">
    <div class="cb-hd"><div class="cb-hd-l"><div class="cb-hd-av">ğŸ¤–</div><div class="cb-hd-i"><h4>AI ì–´ì‹œìŠ¤í„´íŠ¸</h4><span>ì˜¨ë¼ì¸</span></div></div><button class="cb-cl" onclick="App.chat.tog()">&times;</button></div>
    <div class="cb-ms" id="cbMs"></div>
    <div class="cb-sg" id="cbSg"></div>
    <div class="cb-ia"><input class="cb-in" id="cbIn" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." onkeydown="if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();App.chat.send()}"><button class="cb-sn" onclick="App.chat.send()"><svg viewBox="0 0 24 24"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>ì „ì†¡</button></div>
  </div>
  <button class="cb-f" onclick="App.chat.tog()" title="AI ì±—ë´‡">ğŸ¤–</button>
</div>
<script>
const $=id=>document.getElementById(id);
const App=(()=>{
const FC={apiKey:'AIzaSyDcHSt46CHlu_LZYnNUU7xwIlMY7xE8KdU',authDomain:'workhub2.firebaseapp.com',projectId:'workhub2'};
firebase.initializeApp(FC);const afb=firebase.auth(),db=firebase.firestore();
const S={user:null,pg:'dash',chatOpen:false,chatCtx:null,dlEditId:null,dlRat:0,dlFilt:'all',dlData:[],sbOpen:false,nEditId:null,dinPpl:'',dinFood:''};
function toast(m,t='ok'){const w=$('tw'),e=document.createElement('div');e.className=`to to--${t}`;const ic={ok:'âœ“',err:'âœ•',info:'â„¹'};e.innerHTML=`<span style="font-size:1rem">${ic[t]||'â„¹'}</span><span>${m}</span>`;w.appendChild(e);setTimeout(()=>{e.classList.add('to--d');setTimeout(()=>e.remove(),300)},3000)}
function esc(s){const d=document.createElement('div');d.textContent=s||'';return d.innerHTML}
function tAgo(ts){if(!ts)return'';const d=ts.toDate?ts.toDate():new Date(ts),s=Math.floor((Date.now()-d)/1000);if(s<60)return'ë°©ê¸ˆ';if(s<3600)return Math.floor(s/60)+'ë¶„ ì „';if(s<86400)return Math.floor(s/3600)+'ì‹œê°„ ì „';return Math.floor(s/86400)+'ì¼ ì „'}
function fDate(ts){if(!ts)return'';const d=ts.toDate?ts.toDate():new Date(ts);return d.toLocaleDateString('ko-KR',{year:'numeric',month:'long',day:'numeric'})}
function now(){const n=new Date();return`${n.getHours().toString().padStart(2,'0')}:${n.getMinutes().toString().padStart(2,'0')}`}

const auth={
  async loginGoogle(){const b=$('btnG'),t=$('btnGT'),er=$('lErr');b.disabled=true;t.textContent='ë¡œê·¸ì¸ ì¤‘...';er.className='le';er.style.display='none';try{await afb.signInWithPopup(new firebase.auth.GoogleAuthProvider())}catch(e){er.innerHTML=`<strong>ë¡œê·¸ì¸ ì‹¤íŒ¨</strong><br>${e.message}`;er.className='le le--s';er.style.display='block';b.disabled=false;t.textContent='Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸'}},
  async logout(){await afb.signOut()},
  _on(u){S.user=u;if(u){$('pgLogin').hidden=true;$('app').hidden=false;$('cb').style.display='flex';if(u.photoURL)$('hAv').innerHTML=`<img src="${u.photoURL}" alt="">`;else $('hAv').innerHTML='<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>';const nm=u.displayName||u.email.split('@')[0];$('hNm').textContent=nm;$('hEm').textContent=u.email;$('sNm').textContent=nm;$('sEm').textContent=u.email;$('sAv').textContent=nm.charAt(0).toUpperCase();rt.go('dash');chat._welcome();setTimeout(()=>{const f=document.querySelector('.cb-f');if(!f)return;const tp=document.createElement('span');tp.className='cb-tp';tp.textContent='AI ì–´ì‹œìŠ¤í„´íŠ¸ë¥¼ ì‚¬ìš©í•´ë³´ì„¸ìš”!';f.appendChild(tp);setTimeout(()=>tp.remove(),4000)},2000)}else{$('pgLogin').hidden=false;$('app').hidden=true;$('cb').style.display='none';$('btnG').disabled=false;$('btnGT').textContent='Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸'}}
};
afb.onAuthStateChanged(u=>auth._on(u));

const ui={
  togSb(){S.sbOpen=!S.sbOpen;$('sb').classList.toggle('sb--op',S.sbOpen);$('sbOv').classList.toggle('sb-ov--s',S.sbOpen)},
  closeSb(){S.sbOpen=false;$('sb').classList.remove('sb--op');$('sbOv').classList.remove('sb-ov--s')},
  search(q){if(!q.trim())return;const l=q.trim().toLowerCase();if(l.includes('ê³µì§€'))rt.go('notices');else if(l.includes('íšŒì‹')||l.includes('ì‹ë‹¹'))rt.go('dining');else toast('ê²€ìƒ‰: '+q,'info')},
  confirm(msg,fn){$('cfMsg').textContent=msg;$('cfOk').onclick=()=>{ui.closeCf();fn()};$('mCf').hidden=false},
  closeCf(){$('mCf').hidden=true}
};
document.addEventListener('keydown',e=>{if(e.key==='Escape'){if(!$('mN').hidden)notices.closeM();else if(!$('mDL').hidden)dl.close();else if(!$('mCf').hidden)ui.closeCf();else if(S.chatOpen)chat.tog();else ui.closeSb()}});

const rt={go(pg){S.pg=pg;ui.closeSb();['pgDash','pgNotices','pgDining'].forEach(id=>$(id).hidden=true);document.querySelectorAll('.sb-lk').forEach(l=>{const wasOn=l.classList.contains('sb-lk--on');const isOn=l.dataset.pg===pg;l.classList.toggle('sb-lk--on',isOn);if(isOn&&!wasOn){l.style.animation='none';l.offsetHeight;l.style.animation='menuFlash .4s ease-out'}});switch(pg){case'dash':$('pgDash').hidden=false;dash.render();break;case'notices':$('pgNotices').hidden=false;notices.render();break;case'dining':$('pgDining').hidden=false;din.init();dl.render();break}}};

const dash={async render(){try{const nS=await db.collection('notices').get();$('stN').textContent=nS.size;const dS=await db.collection('diningLogs').get();$('stD').textContent=dS.size;let tR=0,cR=0;dS.forEach(d=>{if(d.data().rating){tR+=d.data().rating;cR++}});$('stR').textContent=cR?(tR/cR).toFixed(1):'-';if(nS.size>0){$('nBdg').style.display='';$('nBdg2').style.display='';$('nBdg2').textContent=nS.size}const rc=[];const rS=await db.collection('notices').orderBy('createdAt','desc').limit(5).get();rS.forEach(d=>rc.push({id:d.id,...d.data()}));const ct=$('dN');if(!rc.length){ct.innerHTML='<p style="color:var(--t3);text-align:center;padding:20px;font-size:.8125rem">ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤</p>'}else{const dots=['a','o','w','e','a'];ct.innerHTML=rc.map((n,i)=>`<div class="rr" onclick="App.rt.go('notices')"><span class="rd rd--${dots[i%5]}"></span><div class="ri"><div class="ri-t">${esc(n.title)}</div><div class="ri-s">${esc((n.content||'').substring(0,50))}</div></div><span class="ri-tm">${tAgo(n.createdAt)}</span></div>`).join('')}}catch(e){console.error(e)}}};

const notices={
  async render(){const l=$('nList');l.innerHTML='<div style="text-align:center;padding:40px"><div class="sp"></div></div>';try{const s=await db.collection('notices').orderBy('createdAt','desc').get();if(s.empty){l.innerHTML='<div class="es"><svg viewBox="0 0 24 24"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg><p>ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤</p><span>ìƒˆ ê³µì§€ë¥¼ ë“±ë¡í•´ë³´ì„¸ìš”</span></div>';return}let h='';s.forEach(doc=>{const n=doc.data(),id=doc.id;const pc={urgent:'var(--err)',important:'var(--wn)',normal:'var(--ac)'};const pl={urgent:'ê¸´ê¸‰',important:'ì¤‘ìš”',normal:'ì¼ë°˜'};const c=pc[n.priority]||pc.normal,lb=pl[n.priority]||'ì¼ë°˜';h+=`<div class="nc" style="border-left:3px solid ${c}"><div class="nc-top"><div class="nc-body"><div style="display:flex;align-items:center;gap:8px;margin-bottom:4px"><span style="padding:2px 8px;border-radius:4px;font-size:.6875rem;font-weight:700;background:${c}15;color:${c}">${lb}</span><span class="nc-tl">${esc(n.title)}</span></div><div class="nc-ct">${esc(n.content)}</div></div><div class="nc-act"><button class="bi bi-e" onclick="App.notices.openM('${id}')" title="ìˆ˜ì •"><svg viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button><button class="bi bi-d" onclick="App.notices.del('${id}')" title="ì‚­ì œ"><svg viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-2 14a2 2 0 01-2 2H9a2 2 0 01-2-2L5 6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg></button></div></div><div class="nc-mt"><span><svg viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>${esc(n.author||'ì•Œ ìˆ˜ ì—†ìŒ')}</span><span><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>${fDate(n.createdAt)}</span></div></div>`});l.innerHTML=h}catch(e){l.innerHTML=`<div class="es"><p>ë¡œë”© ì‹¤íŒ¨</p><span>${e.message}</span></div>`}},
  async openM(id){S.nEditId=id||null;$('nIT').value='';$('nIC').value='';$('nIP').value='normal';if(id){$('mNT').textContent='ê³µì§€ì‚¬í•­ ìˆ˜ì •';$('nSB').textContent='ìˆ˜ì •';try{const d=await db.collection('notices').doc(id).get();if(d.exists){const v=d.data();$('nIT').value=v.title||'';$('nIC').value=v.content||'';$('nIP').value=v.priority||'normal'}}catch(e){}}else{$('mNT').textContent='ê³µì§€ì‚¬í•­ ë“±ë¡';$('nSB').textContent='ë“±ë¡'}$('mN').hidden=false},
  closeM(){$('mN').hidden=true;S.nEditId=null},
  async save(){const ti=$('nIT').value.trim(),co=$('nIC').value.trim(),pr=$('nIP').value;if(!ti)return toast('ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”','err');if(!co)return toast('ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”','err');try{const d={title:ti,content:co,priority:pr,author:S.user.displayName||S.user.email.split('@')[0],authorEmail:S.user.email,updatedAt:firebase.firestore.FieldValue.serverTimestamp()};if(S.nEditId){await db.collection('notices').doc(S.nEditId).update(d);toast('ê³µì§€ì‚¬í•­ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤')}else{d.createdAt=firebase.firestore.FieldValue.serverTimestamp();await db.collection('notices').add(d);toast('ê³µì§€ì‚¬í•­ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤')}notices.closeM();notices.render()}catch(e){toast('ì €ì¥ ì‹¤íŒ¨: '+e.message,'err')}},
  del(id){ui.confirm('ì´ ê³µì§€ì‚¬í•­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?',async()=>{try{await db.collection('notices').doc(id).delete();toast('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');notices.render()}catch(e){toast('ì‚­ì œ ì‹¤íŒ¨','err')}})}
};

const FOODS=[{n:'í•œì‹',i:'ğŸš'},{n:'ê³ ê¸°/êµ¬ì´',i:'ğŸ¥©'},{n:'ì¤‘ì‹',i:'ğŸ¥Ÿ'},{n:'ì¼ì‹',i:'ğŸ£'},{n:'ì–‘ì‹',i:'ğŸ'},{n:'ì¹˜í‚¨',i:'ğŸ—'},{n:'í•´ì‚°ë¬¼',i:'ğŸ¦'},{n:'ë¶„ì‹',i:'ğŸœ'},{n:'í”¼ì',i:'ğŸ•'},{n:'ì•„ì‹œì•ˆ',i:'ğŸœ'},{n:'ë·”í˜',i:'ğŸ´'},{n:'ìˆ ì§‘/í˜¸í”„',i:'ğŸº'},{n:'ì¹´í˜',i:'â˜•'},{n:'íŒ¨ìŠ¤íŠ¸í‘¸ë“œ',i:'ğŸ”'},{n:'ì¡±ë°œ/ë³´ìŒˆ',i:'ğŸ·'},{n:'ê³±ì°½/ë§‰ì°½',i:'ğŸ«•'},{n:'ìƒ¤ë¸Œìƒ¤ë¸Œ',i:'ğŸ¥˜'},{n:'ë² ì´ì»¤ë¦¬',i:'ğŸ¥'},{n:'ë””ì €íŠ¸',i:'ğŸ°'},{n:'ê¸°íƒ€',i:'ğŸ½ï¸'}];
const din={
  init(){const g=$('fGrid');if(g.children.length)return;g.innerHTML=FOODS.map(f=>`<div class="fc" onclick="App.din.setF(this,'${f.n}')"><span class="fc-i">${f.i}</span><span class="fc-n">${f.n}</span></div>`).join('')},
  setP(el,v){S.dinPpl=v;$('pBtns').querySelectorAll('.pp').forEach(b=>b.classList.remove('pp--on'));el.classList.add('pp--on')},
  setF(el,v){S.dinFood=v;$('fGrid').querySelectorAll('.fc').forEach(c=>c.classList.remove('fc--on'));el.classList.add('fc--on')},
  search(){const a=$('dArea').value,f=S.dinFood;if(!a)return toast('ì§€ì—­ì„ ì„ íƒí•˜ì„¸ìš”','err');if(!f)return toast('ìŒì‹ ì¢…ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”','err');let q=`${a} ${f} ë§›ì§‘`;if(S.dinPpl)q+=` ${S.dinPpl}`;window.open(`https://map.naver.com/v5/search/${encodeURIComponent(q)}`,'_blank');toast(`ë„¤ì´ë²„ ì§€ë„: ${q}`,'info')}
};

const dl={
  open(id){S.dlEditId=id||null;S.dlRat=0;$('dlN').value='';$('dlA').value='';$('dlFd').value='';$('dlP').value='';$('dlDt').value=new Date().toISOString().slice(0,10);$('dlMm').value='';dl._rSt();if(id){$('dlMT').textContent='íšŒì‹ ìˆ˜ì •';const it=S.dlData.find(d=>d.id===id);if(it){$('dlN').value=it.name||'';$('dlA').value=it.area||'';$('dlFd').value=it.food||'';$('dlP').value=it.people||'';$('dlDt').value=it.diningDate||'';$('dlMm').value=it.memo||'';S.dlRat=it.rating||0;dl._rSt()}}else $('dlMT').textContent='íšŒì‹ ë“±ë¡';$('mDL').hidden=false},
  close(){$('mDL').hidden=true;S.dlEditId=null},
  setR(n){S.dlRat=n;dl._rSt()},
  _rSt(){$('dlSt').querySelectorAll('span').forEach((s,i)=>{s.textContent=i<S.dlRat?'â˜…':'â˜†';s.style.color=i<S.dlRat?'var(--wn)':'var(--t3)'})},
  async save(){const nm=$('dlN').value.trim();if(!nm)return toast('ìŒì‹ì ëª…ì„ ì…ë ¥í•˜ì„¸ìš”','err');const d={name:nm,area:$('dlA').value,food:$('dlFd').value,people:parseInt($('dlP').value)||0,diningDate:$('dlDt').value,rating:S.dlRat,memo:$('dlMm').value.trim(),author:S.user.displayName||S.user.email.split('@')[0],authorEmail:S.user.email,updatedAt:firebase.firestore.FieldValue.serverTimestamp()};try{if(S.dlEditId){await db.collection('diningLogs').doc(S.dlEditId).update(d);toast('ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤')}else{d.createdAt=firebase.firestore.FieldValue.serverTimestamp();await db.collection('diningLogs').add(d);toast('íšŒì‹ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤')}dl.close();dl.render()}catch(e){toast('ì €ì¥ ì‹¤íŒ¨','err')}},
  del(id){ui.confirm('ì´ íšŒì‹ ì´ë ¥ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?',async()=>{try{await db.collection('diningLogs').doc(id).delete();toast('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');dl.render()}catch(e){toast('ì‚­ì œ ì‹¤íŒ¨','err')}})},
  setFilt(f){S.dlFilt=f;dl._draw()},
  openNav(nm,ar){window.open(`https://map.naver.com/v5/search/${encodeURIComponent((ar?ar+' ':'')+nm)}`,'_blank')},
  async render(){try{const s=await db.collection('diningLogs').orderBy('createdAt','desc').get();S.dlData=[];s.forEach(d=>S.dlData.push({id:d.id,...d.data()}));dl._draw()}catch(e){console.error(e)}},
  _emoji(f){const fd=FOODS.find(x=>x.n===f);return fd?fd.i:'ğŸ½ï¸'},
  _stars(r){return'â˜…'.repeat(r||0)+'â˜†'.repeat(5-(r||0))},
  _draw(){const data=S.dlData,se=$('dlS'),fe=$('dlF'),le=$('dlL');if(data.length){let tR=0,cR=0,fm={};data.forEach(d=>{if(d.rating){tR+=d.rating;cR++}if(d.food)fm[d.food]=(fm[d.food]||0)+1});const av=cR?(tR/cR).toFixed(1):'-';const tf=Object.entries(fm).sort((a,b)=>b[1]-a[1])[0];se.innerHTML=`<div class="dls-i"><div class="dls-v">${data.length}</div><div class="dls-l">ì´ íšŒì‹</div></div><div class="dls-i"><div class="dls-v">${av}</div><div class="dls-l">í‰ê·  í‰ì </div></div><div class="dls-i"><div class="dls-v">${tf?tf[0]:'-'}</div><div class="dls-l">ìµœë‹¤ ìŒì‹</div></div>`}else se.innerHTML='';const foods=[...new Set(data.map(d=>d.food).filter(Boolean))];fe.innerHTML=`<span class="dlf-i ${S.dlFilt==='all'?'dlf-i--on':''}" onclick="App.dl.setFilt('all')">ì „ì²´</span>`+foods.map(f=>`<span class="dlf-i ${S.dlFilt===f?'dlf-i--on':''}" onclick="App.dl.setFilt('${f}')">${f}</span>`).join('');const fd=S.dlFilt==='all'?data:data.filter(d=>d.food===S.dlFilt);if(!fd.length){le.innerHTML='<div class="dle"><p>ë“±ë¡ëœ íšŒì‹ ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤</p></div>';return}le.innerHTML=fd.map(d=>`<div class="dli"><span class="dli-e">${dl._emoji(d.food)}</span><div class="dli-inf"><div class="dli-nm">${esc(d.name)}</div><div class="dli-mt">${d.area?`<span>ğŸ“${d.area}</span>`:''}${d.food?`<span>${d.food}</span>`:''}${d.people?`<span>ğŸ‘¥${d.people}ëª…</span>`:''}${d.diningDate?`<span>ğŸ“…${d.diningDate}</span>`:''}</div>${d.rating?`<div class="dli-st">${dl._stars(d.rating)}</div>`:''}${d.memo?`<div style="font-size:.75rem;color:var(--t3);margin-top:2px">"${esc(d.memo.substring(0,40))}"</div>`:''}</div><div class="dli-act"><button class="dli-nv" onclick="App.dl.openNav('${esc(d.name)}','${esc(d.area||'')}')">Nì§€ë„</button><button class="bi bi-e" onclick="App.dl.open('${d.id}')"><svg viewBox="0 0 24 24" width="16" height="16"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button><button class="bi bi-d" onclick="App.dl.del('${d.id}')"><svg viewBox="0 0 24 24" width="16" height="16"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-2 14a2 2 0 01-2 2H9a2 2 0 01-2-2L5 6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg></button></div></div>`).join('')}
};

const chat={
  tog(){S.chatOpen=!S.chatOpen;$('cbW').classList.toggle('cb-w--o',S.chatOpen);if(S.chatOpen)$('cbIn').focus()},
  _welcome(){const m=$('cbMs');m.innerHTML='';chat._bot(`ì•ˆë…•í•˜ì„¸ìš”! <b>WorkHub AI ì–´ì‹œìŠ¤í„´íŠ¸</b>ì…ë‹ˆë‹¤ ğŸ¤–<br><br>ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?<br>â€¢ <b>"ê³µì§€ ë“±ë¡"</b> â€” ìƒˆ ê³µì§€ì‚¬í•­ ë“±ë¡<br>â€¢ <b>"ê³µì§€ ëª©ë¡"</b> â€” ë“±ë¡ëœ ê³µì§€ í™•ì¸<br>â€¢ <b>"íšŒì‹ ì´ë ¥"</b> â€” íšŒì‹ ê¸°ë¡ í™•ì¸<br>â€¢ <b>"íšŒì‹ ë“±ë¡"</b> â€” ìƒˆ íšŒì‹ ë“±ë¡<br>â€¢ <b>"ê°•ë‚¨ ê³ ê¸° íšŒì‹ ì°¾ì•„ì¤˜"</b> â€” ë„¤ì´ë²„ ì§€ë„ ê²€ìƒ‰<br>â€¢ <b>"ë„ì›€ë§"</b> â€” ëª…ë ¹ì–´ ì•ˆë‚´`);chat._sug(['ê³µì§€ ëª©ë¡','ê³µì§€ ë“±ë¡','íšŒì‹ ì´ë ¥','íšŒì‹ ë“±ë¡','ë„ì›€ë§'])},
  _bot(h){const m=$('cbMs'),d=document.createElement('div');d.className='cb-m cb-m--b';d.innerHTML=`<div class="cb-bb">${h}</div><div class="cb-tm">${now()}</div>`;m.appendChild(d);m.scrollTop=m.scrollHeight},
  _usr(t){const m=$('cbMs'),d=document.createElement('div');d.className='cb-m cb-m--u';d.innerHTML=`<div class="cb-bb">${esc(t)}</div><div class="cb-tm">${now()}</div>`;m.appendChild(d);m.scrollTop=m.scrollHeight},
  _typing(){const m=$('cbMs'),d=document.createElement('div');d.className='cb-ty';d.id='cbTy';d.innerHTML='<span></span><span></span><span></span>';m.appendChild(d);m.scrollTop=m.scrollHeight},
  _untype(){const e=$('cbTy');if(e)e.remove()},
  _sug(a){$('cbSg').innerHTML=a.map(s=>`<button class="cb-sg-b" onclick="App.chat._qk('${s}')">${s}</button>`).join('')},
  _qk(t){$('cbIn').value=t;chat.send()},
  async send(){const inp=$('cbIn'),t=inp.value.trim();if(!t)return;inp.value='';chat._usr(t);chat._typing();setTimeout(async()=>{chat._untype();await chat._proc(t)},400+Math.random()*400)},
  async _proc(text){
    const t=text.toLowerCase().replace(/\s+/g,' ').trim();
    if(S.chatCtx){const c=S.chatCtx;
      if(c.type==='nreg'){
        if(c.step==='title'){c.title=text;c.step='content';chat._bot('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');chat._sug(['ì·¨ì†Œ']);return}
        if(c.step==='content'){c.content=text;c.step='priority';chat._bot('ì¤‘ìš”ë„ë¥¼ ì„ íƒí•˜ì„¸ìš”.');chat._sug(['ì¼ë°˜','ì¤‘ìš”','ê¸´ê¸‰','ì·¨ì†Œ']);return}
        if(c.step==='priority'){const pm={'ì¼ë°˜':'normal','ì¤‘ìš”':'important','ê¸´ê¸‰':'urgent'};try{await db.collection('notices').add({title:c.title,content:c.content,priority:pm[text]||'normal',author:S.user.displayName||S.user.email.split('@')[0],authorEmail:S.user.email,createdAt:firebase.firestore.FieldValue.serverTimestamp(),updatedAt:firebase.firestore.FieldValue.serverTimestamp()});chat._bot(`âœ… ê³µì§€ì‚¬í•­ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!<br><b>${esc(c.title)}</b>`);toast('ê³µì§€ ë“±ë¡ ì™„ë£Œ');if(S.pg==='notices')notices.render()}catch(e){chat._bot('âŒ ë“±ë¡ ì‹¤íŒ¨: '+e.message)}S.chatCtx=null;chat._sug(['ê³µì§€ ëª©ë¡','íšŒì‹ ì´ë ¥','ë„ì›€ë§']);return}
      }
      if(c.type==='dreg'){
        if(c.step==='name'){c.name=text;c.step='area';chat._bot('ì§€ì—­ì„ ì…ë ¥í•´ì£¼ì„¸ìš” (ì˜ˆ: ê°•ë‚¨êµ¬)');chat._sug(['ê°•ë‚¨êµ¬','ë§ˆí¬êµ¬','ì¢…ë¡œêµ¬','ì„œì´ˆêµ¬','ì†¡íŒŒêµ¬','ì·¨ì†Œ']);return}
        if(c.step==='area'){c.area=text;c.step='food';chat._bot('ìŒì‹ ì¢…ë¥˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');chat._sug(['í•œì‹','ê³ ê¸°/êµ¬ì´','ì¤‘ì‹','ì¼ì‹','ì–‘ì‹','ì¹˜í‚¨','í•´ì‚°ë¬¼','ì·¨ì†Œ']);return}
        if(c.step==='food'){c.food=text;try{await db.collection('diningLogs').add({name:c.name,area:c.area,food:c.food,people:0,diningDate:new Date().toISOString().slice(0,10),rating:0,memo:'',author:S.user.displayName||S.user.email.split('@')[0],authorEmail:S.user.email,createdAt:firebase.firestore.FieldValue.serverTimestamp(),updatedAt:firebase.firestore.FieldValue.serverTimestamp()});chat._bot(`âœ… íšŒì‹ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!<br><b>${esc(c.name)}</b> (${esc(c.area)} / ${esc(c.food)})`);toast('íšŒì‹ ë“±ë¡ ì™„ë£Œ');if(S.pg==='dining')dl.render()}catch(e){chat._bot('âŒ ë“±ë¡ ì‹¤íŒ¨: '+e.message)}S.chatCtx=null;chat._sug(['íšŒì‹ ì´ë ¥','ê³µì§€ ëª©ë¡','ë„ì›€ë§']);return}
      }
    }
    if(t==='ì·¨ì†Œ'){S.chatCtx=null;chat._bot('ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');chat._sug(['ê³µì§€ ëª©ë¡','ê³µì§€ ë“±ë¡','íšŒì‹ ì´ë ¥','ë„ì›€ë§']);return}
    if(t.includes('ê³µì§€')&&(t.includes('ëª©ë¡')||t.includes('ë¦¬ìŠ¤íŠ¸')||t.includes('ì¡°íšŒ')||t.includes('í™•ì¸')||t.includes('ë³´ì—¬'))){try{const s=await db.collection('notices').orderBy('createdAt','desc').limit(5).get();if(s.empty){chat._bot('ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.')}else{let h='ğŸ“‹ <b>ìµœê·¼ ê³µì§€ì‚¬í•­</b><br><br>';s.forEach(doc=>{const n=doc.data();const p={normal:'ğŸ”µ',important:'ğŸŸ¡',urgent:'ğŸ”´'};h+=`${p[n.priority]||'ğŸ”µ'} <b>${esc(n.title)}</b><br><span style="font-size:.75rem;color:var(--t3)">${esc((n.content||'').substring(0,60))}</span><br><br>`});chat._bot(h)}}catch(e){chat._bot('ì¡°íšŒ ì‹¤íŒ¨')}chat._sug(['ê³µì§€ ë“±ë¡','íšŒì‹ ì´ë ¥','ë„ì›€ë§']);return}
    if(t.includes('ê³µì§€')&&(t.includes('ë“±ë¡')||t.includes('ì‘ì„±')||t.includes('ì˜¬ë ¤')||t.includes('ì¶”ê°€')||t.includes('ë§Œë“¤'))){S.chatCtx={type:'nreg',step:'title'};chat._bot('ê³µì§€ì‚¬í•­ì„ ë“±ë¡í•©ë‹ˆë‹¤.<br>ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');chat._sug(['ì·¨ì†Œ']);return}
    if(t.includes('ê³µì§€')&&(t.includes('ì‚­ì œ')||t.includes('ì§€ì›Œ'))){chat._bot('ê³µì§€ ì‚­ì œëŠ” <b>ê³µì§€ì‚¬í•­ í˜ì´ì§€</b>ì—ì„œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');chat._sug(['ê³µì§€ì‚¬í•­ ë³´ê¸°']);return}
    if((t.includes('íšŒì‹')&&(t.includes('ì´ë ¥')||t.includes('ëª©ë¡')||t.includes('ë¦¬ìŠ¤íŠ¸')||t.includes('ê¸°ë¡')||t.includes('í™•ì¸')||t.includes('ë³´ì—¬')))||t.includes('ìŒì‹ì  ëª©ë¡')){try{const s=await db.collection('diningLogs').orderBy('createdAt','desc').limit(5).get();if(s.empty){chat._bot('ë“±ë¡ëœ íšŒì‹ ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.')}else{let h='ğŸ½ï¸ <b>ìµœê·¼ íšŒì‹ ì´ë ¥</b><br><br>';s.forEach(doc=>{const d=doc.data();h+=`${dl._emoji(d.food)} <b>${esc(d.name)}</b> ${d.rating?'â­'.repeat(d.rating):''}<br><span style="font-size:.75rem;color:var(--t3)">${d.area?'ğŸ“'+d.area+' ':''}${d.diningDate?'ğŸ“…'+d.diningDate+' ':''}${d.people?'ğŸ‘¥'+d.people+'ëª…':''}</span><br><br>`});chat._bot(h)}}catch(e){chat._bot('ì¡°íšŒ ì‹¤íŒ¨')}chat._sug(['íšŒì‹ ë“±ë¡','ê³µì§€ ëª©ë¡','ë„ì›€ë§']);return}
    if((t.includes('íšŒì‹')&&(t.includes('ë“±ë¡')||t.includes('ì¶”ê°€')||t.includes('ê¸°ë¡')))||(t.includes('ìŒì‹ì ')&&(t.includes('ë“±ë¡')||t.includes('ì¶”ê°€')))){S.chatCtx={type:'dreg',step:'name'};chat._bot('íšŒì‹ì„ ë“±ë¡í•©ë‹ˆë‹¤.<br>ìŒì‹ì  ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');chat._sug(['ì·¨ì†Œ']);return}
    const areas=['ê°•ë‚¨','ê°•ë™','ê°•ë¶','ê°•ì„œ','ê´€ì•…','ê´‘ì§„','êµ¬ë¡œ','ê¸ˆì²œ','ë…¸ì›','ë„ë´‰','ë™ëŒ€ë¬¸','ë™ì‘','ë§ˆí¬','ì„œëŒ€ë¬¸','ì„œì´ˆ','ì„±ë™','ì„±ë¶','ì†¡íŒŒ','ì–‘ì²œ','ì˜ë“±í¬','ìš©ì‚°','ì€í‰','ì¢…ë¡œ','ì¤‘êµ¬','ì¤‘ë‘'];
    const foodKw=['ê³ ê¸°','ì‚¼ê²¹ì‚´','ê°ˆë¹„','í•œì‹','ì¤‘ì‹','ì¼ì‹','ì–‘ì‹','ì¹˜í‚¨','í•´ì‚°ë¬¼','ë¶„ì‹','í”¼ì','ë·”í˜','ìˆ ì§‘','í˜¸í”„','ë§¥ì£¼','ì¹´í˜','ì¡±ë°œ','ë³´ìŒˆ','ê³±ì°½','ë§‰ì°½','ìƒ¤ë¸Œ'];
    let fA='',fF='';for(const a of areas){if(t.includes(a)){fA=a+'êµ¬';break}}for(const f of foodKw){if(t.includes(f)){fF=f;break}}
    if((t.includes('ì°¾ì•„')||t.includes('ê²€ìƒ‰')||t.includes('ì¶”ì²œ'))&&(fA||fF)){const q=`${fA} ${fF} ë§›ì§‘`.trim();window.open(`https://map.naver.com/v5/search/${encodeURIComponent(q)}`,'_blank');chat._bot(`ğŸ” <b>ë„¤ì´ë²„ ì§€ë„</b>ì—ì„œ ê²€ìƒ‰í•©ë‹ˆë‹¤<br>"${esc(q)}"`);chat._sug(['íšŒì‹ ì´ë ¥','ê³µì§€ ëª©ë¡','ë„ì›€ë§']);return}
    if(t.includes('ê³µì§€ì‚¬í•­')||t==='ê³µì§€'){rt.go('notices');chat._bot('ê³µì§€ì‚¬í•­ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');chat._sug(['ê³µì§€ ë“±ë¡','ê³µì§€ ëª©ë¡']);return}
    if(t.includes('ëŒ€ì‹œë³´ë“œ')||t==='í™ˆ'){rt.go('dash');chat._bot('ëŒ€ì‹œë³´ë“œë¡œ ì´ë™í•©ë‹ˆë‹¤.');return}
    if(t.includes('íšŒì‹ ì°¾ê¸°')||t.includes('íšŒì‹ì°¾ê¸°')){rt.go('dining');chat._bot('íšŒì‹ ì°¾ê¸° í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');return}
    if(t.includes('ë„ì›€ë§')||t.includes('ëª…ë ¹ì–´')||t.includes('help')||t==='?'){chat._bot(`ğŸ“– <b>ëª…ë ¹ì–´ ì•ˆë‚´</b><br><br>ğŸ“‹ <b>ê³µì§€</b><br>â€¢ ê³µì§€ ë“±ë¡ / ê³µì§€ ì‘ì„±<br>â€¢ ê³µì§€ ëª©ë¡ / ê³µì§€ í™•ì¸<br><br>ğŸ½ï¸ <b>íšŒì‹</b><br>â€¢ íšŒì‹ ë“±ë¡ / íšŒì‹ ì¶”ê°€<br>â€¢ íšŒì‹ ì´ë ¥ / íšŒì‹ ëª©ë¡<br>â€¢ "ê°•ë‚¨ ê³ ê¸° ì°¾ì•„ì¤˜"<br><br>ğŸ§­ <b>ì´ë™</b><br>â€¢ ëŒ€ì‹œë³´ë“œ / ê³µì§€ì‚¬í•­ / íšŒì‹ ì°¾ê¸°`);chat._sug(['ê³µì§€ ë“±ë¡','ê³µì§€ ëª©ë¡','íšŒì‹ ë“±ë¡','íšŒì‹ ì´ë ¥']);return}
    if(t.match(/^(ì•ˆë…•|í•˜ì´|hello|hi|ë°˜ê°€)/)){chat._bot(`ì•ˆë…•í•˜ì„¸ìš”, <b>${esc(S.user.displayName||'')}</b>ë‹˜! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”? ğŸ˜Š`);chat._sug(['ê³µì§€ ëª©ë¡','íšŒì‹ ì´ë ¥','ë„ì›€ë§']);return}
    chat._bot(`ì£„ì†¡í•©ë‹ˆë‹¤, ì´í•´í•˜ì§€ ëª»í–ˆì–´ìš”. ğŸ˜…<br>"<b>ë„ì›€ë§</b>"ì„ ì…ë ¥í•˜ë©´ ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´ë¥¼ ì•ˆë‚´í•´ë“œë¦½ë‹ˆë‹¤.`);chat._sug(['ë„ì›€ë§','ê³µì§€ ëª©ë¡','íšŒì‹ ì´ë ¥']);
  }
};

return Object.freeze({auth,ui,rt,dash,notices,din,dl,chat});
})();
</script>
</body>
</html>
