<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorkHub - ìŠ¤ë§ˆíŠ¸ ê·¸ë£¹ì›¨ì–´</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        :root{
            --c-p50:#f0f9ff;--c-p500:#0ea5e9;--c-p600:#0284c7;
            --c-a500:#8b5cf6;--c-a600:#7c3aed;
            --c-ok100:#dcfce7;--c-ok500:#22c55e;--c-ok600:#16a34a;--c-ok800:#166534;
            --c-w100:#fef3c7;--c-w800:#92400e;
            --c-err50:#fef2f2;--c-err500:#ef4444;--c-err600:#dc2626;
            --c-or500:#f97316;
            --c-s50:#f8fafc;--c-s100:#f1f5f9;--c-s200:#e2e8f0;--c-s300:#cbd5e1;
            --c-s400:#94a3b8;--c-s500:#64748b;--c-s600:#475569;--c-s700:#334155;
            --c-s800:#1e293b;--c-s900:#0f172a;
            --grad:linear-gradient(135deg,var(--c-p500),var(--c-a500));
            --grad-ok:linear-gradient(135deg,#10b981,#14b8a6);
            --grad-err:linear-gradient(135deg,var(--c-or500),var(--c-err500));
            --ff:'Noto Sans KR',-apple-system,BlinkMacSystemFont,sans-serif;
            --fd:'Playfair Display',Georgia,serif;
            --hh:64px;--sw:256px;
        }
        *,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
        html{-webkit-font-smoothing:antialiased}
        body{font-family:var(--ff);font-size:1rem;color:var(--c-s800);background:var(--c-s50);line-height:1.6;min-height:100vh;overflow-x:hidden}
        button{font-family:var(--ff);cursor:pointer;border:none;background:none}
        input,textarea{font-family:var(--ff);border:none;outline:none}
        img{max-width:100%;display:block}[hidden]{display:none!important}
        .logo{font-family:var(--fd)}

        @keyframes su{from{opacity:0;transform:translateY(24px)}to{opacity:1;transform:translateY(0)}}
        @keyframes sr{from{opacity:0;transform:translateX(24px)}to{opacity:1;transform:translateX(0)}}
        @keyframes fi{from{opacity:0}to{opacity:1}}
        @keyframes ti{from{opacity:0;transform:translateY(-12px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}
        @keyframes to2{from{opacity:1}to{opacity:0;transform:translateY(-12px) scale(.95)}}
        @keyframes sp{to{transform:rotate(360deg)}}
        .asu{animation:su .5s ease-out both}.asr{animation:sr .4s ease-out both}

        .tc{position:fixed;top:1rem;right:1rem;z-index:70;display:flex;flex-direction:column;gap:.5rem;pointer-events:none}
        .tt{pointer-events:auto;display:flex;align-items:center;gap:.75rem;padding:.75rem 1.25rem;border-radius:.625rem;font-size:.875rem;font-weight:500;box-shadow:0 20px 25px -5px rgba(0,0,0,.1);animation:ti .3s ease-out both;max-width:420px}
        .tt.rm{animation:to2 .25s ease-in both}
        .tt.ok{background:var(--c-ok600);color:#fff}
        .tt.er{background:var(--c-err600);color:#fff}
        .tt.inf{background:var(--c-s800);color:#fff}

        .pg-login{min-height:100vh;background:linear-gradient(135deg,var(--c-s900),var(--c-s800),var(--c-s900));display:flex;align-items:center;justify-content:center;padding:1rem;position:relative;overflow:hidden}
        .pg-login::before{content:'';position:absolute;inset:-50%;width:200%;height:200%;background:radial-gradient(ellipse at 25% 15%,rgba(14,165,233,.07),transparent 50%),radial-gradient(ellipse at 75% 85%,rgba(139,92,246,.07),transparent 50%);pointer-events:none}
        .lw{width:100%;max-width:440px;position:relative;z-index:1}
        .lb{text-align:center;margin-bottom:2rem}
        .lb h1{font-size:3rem;font-weight:900;color:#fff;letter-spacing:-1px}
        .lb p{color:var(--c-s400);font-size:.875rem;letter-spacing:2px;margin-top:.5rem}
        .lc{background:rgba(255,255,255,.04);backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);border:1px solid rgba(255,255,255,.08);border-radius:1.25rem;padding:2.5rem;box-shadow:0 25px 50px -12px rgba(0,0,0,.25)}
        .lc h2{font-size:1.5rem;font-weight:700;color:#fff;margin-bottom:1.5rem}

        .gbtn{width:100%;padding:.75rem 1rem;background:#fff;border-radius:.625rem;font-size:.9375rem;font-weight:500;color:var(--c-s700);display:flex;align-items:center;justify-content:center;gap:.75rem;transition:all .2s}
        .gbtn:hover:not(:disabled){background:var(--c-s50);box-shadow:0 8px 24px rgba(0,0,0,.2);transform:translateY(-1px)}
        .gbtn:disabled{opacity:.6;cursor:wait}
        .gbtn svg{width:20px;height:20px;flex-shrink:0}
        .spinner{display:inline-block;width:20px;height:20px;border:2.5px solid var(--c-s300);border-top-color:var(--c-p500);border-radius:50%;animation:sp .6s linear infinite}

        .err-box{margin-top:.75rem;padding:.75rem 1rem;background:rgba(239,68,68,.15);border:1px solid rgba(239,68,68,.3);border-radius:.625rem;font-size:.75rem;color:#fca5a5;line-height:1.7;display:none}
        .err-box.show{display:block}
        .err-box strong{color:#fff;font-weight:600}
        .err-box a{color:var(--c-p500);text-decoration:underline;cursor:pointer}

        .fbs{margin-top:.75rem;text-align:center;font-size:.75rem;cursor:pointer;text-decoration:underline;transition:color .2s}

        .dv{position:relative;margin:1.5rem 0;text-align:center}
        .dv::before{content:'';position:absolute;top:50%;left:0;right:0;height:1px;background:var(--c-s600)}
        .dv span{position:relative;padding:0 1rem;font-size:.875rem;color:var(--c-s400);background:rgba(20,27,40,.9)}

        .ff{margin-bottom:1rem}
        .ff>label{display:block;font-size:.875rem;font-weight:500;color:var(--c-s300);margin-bottom:.5rem}
        .fi2{width:100%;padding:.75rem 1rem;background:rgba(51,65,85,.5);border:1px solid var(--c-s600);border-radius:.625rem;font-size:.875rem;color:#fff;transition:all .2s}
        .fi2::placeholder{color:var(--c-s400)}
        .fi2:focus{border-color:var(--c-p500);box-shadow:0 0 0 3px rgba(14,165,233,.2)}
        .fi2w{background:#fff;border:1px solid var(--c-s300);color:var(--c-s900)}
        .fi2w::placeholder{color:var(--c-s400)}
        .fi2w:focus{border-color:var(--c-p500);box-shadow:0 0 0 3px rgba(14,165,233,.15)}
        textarea.fi2{resize:vertical;min-height:180px;line-height:1.7}
        .lsub{width:100%;padding:.75rem;background:var(--grad);border-radius:.625rem;font-size:1rem;font-weight:600;color:#fff;margin-top:1.5rem;transition:all .3s}
        .lsub:hover{box-shadow:0 4px 15px rgba(139,92,246,.3);transform:translateY(-1px)}
        .lfooter{text-align:center;font-size:.75rem;color:var(--c-s500);margin-top:1.5rem}

        .mb{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;padding:1rem;z-index:50;animation:fi .2s ease-out}
        .md{width:100%;border-radius:1.25rem;padding:2.5rem;box-shadow:0 25px 50px -12px rgba(0,0,0,.25);animation:su .3s ease-out}
        .mdg{max-width:560px;background:rgba(30,41,59,.97);backdrop-filter:blur(24px);border:1px solid rgba(255,255,255,.08);color:#fff}
        .mdw{max-width:640px;background:#fff;color:var(--c-s900)}
        .md h3{font-size:1.5rem;font-weight:700;margin-bottom:1rem}
        .md p.desc{font-size:.875rem;color:var(--c-s300);margin-bottom:1.5rem;line-height:1.6}

        .guide{background:rgba(30,41,59,.5);border:1px solid var(--c-s600);border-radius:.625rem;padding:1rem;margin-bottom:1.25rem}
        .guide .gt{font-size:.875rem;font-weight:600;color:var(--c-s300);margin-bottom:.75rem}
        .guide ol{font-size:.75rem;color:var(--c-s400);padding-left:1.25rem;line-height:2.2}
        .guide ol a{color:var(--c-p500)}.guide ol a:hover{text-decoration:underline}
        .guide ol strong{color:var(--c-s200)}
        .guide ol code{background:rgba(255,255,255,.1);padding:1px 6px;border-radius:4px;font-size:.7rem;color:var(--c-p500)}

        .cfs{display:flex;flex-direction:column;gap:.75rem}
        .cfs label{font-size:.75rem;font-weight:600;color:var(--c-s300)}
        .cfs input{width:100%;padding:.5rem .75rem;background:rgba(51,65,85,.5);border:1px solid var(--c-s600);border-radius:.375rem;font-size:.75rem;color:#fff;font-family:monospace}
        .cfs input:focus{border-color:var(--c-p500);outline:none;box-shadow:0 0 0 2px rgba(14,165,233,.2)}
        .cfs input::placeholder{color:var(--c-s500)}
        .domain-info{margin-top:.75rem;padding:.625rem .75rem;background:rgba(14,165,233,.1);border:1px solid rgba(14,165,233,.2);border-radius:.5rem;font-size:.7rem;color:var(--c-p500);line-height:1.6}
        .domain-info code{background:rgba(255,255,255,.1);padding:1px 4px;border-radius:3px}
        .ma{display:flex;gap:.75rem;margin-top:1.5rem}
        .ma button{flex:1;padding:.75rem;border-radius:.625rem;font-size:.875rem;font-weight:600;transition:all .2s}
        .bp{background:var(--grad);color:#fff}.bp:hover{box-shadow:0 4px 15px rgba(139,92,246,.3)}
        .bs{background:var(--c-s600);color:#fff}.bs:hover{background:var(--c-s500)}
        .bsw{background:var(--c-s200);color:var(--c-s700)}.bsw:hover{background:var(--c-s300)}
        .mtip{text-align:center;font-size:.75rem;color:var(--c-s400);margin-top:1.25rem}

        .ah{background:#fff;border-bottom:1px solid var(--c-s200);position:sticky;top:0;z-index:20;box-shadow:0 1px 2px rgba(0,0,0,.05);height:var(--hh)}
        .ahi{max-width:1280px;margin:0 auto;padding:0 1rem;display:flex;justify-content:space-between;align-items:center;height:100%}
        .ahl{display:flex;align-items:center;gap:1rem}
        .ahm{display:none;padding:.5rem;border-radius:.5rem;color:var(--c-s600)}.ahm:hover{background:var(--c-s100)}
        .ahlogo{font-size:1.5rem;font-weight:900;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
        .ahr{display:flex;align-items:center;gap:.75rem}
        .ahu{display:flex;align-items:center;gap:.75rem;padding:.5rem 1rem;background:var(--c-s50);border-radius:.625rem}
        .ahav{width:32px;height:32px;border-radius:50%;object-fit:cover}
        .ahaf{width:32px;height:32px;border-radius:50%;background:var(--c-s200);display:flex;align-items:center;justify-content:center}
        .ahaf svg{width:16px;height:16px;color:var(--c-s500)}
        .ahun{font-size:.875rem;font-weight:500;color:var(--c-s600)}
        .ahlo{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;font-size:.875rem;font-weight:500;color:var(--c-s500);border-radius:.625rem;transition:all .2s}
        .ahlo:hover{background:var(--c-s100);color:var(--c-s800)}.ahlo svg{width:16px;height:16px}

        .al{display:flex}
        .sb{width:var(--sw);background:#fff;border-right:1px solid var(--c-s200);min-height:calc(100vh - var(--hh));padding:1rem;flex-shrink:0;transition:transform .3s cubic-bezier(.4,0,.2,1)}
        .sbn{display:flex;flex-direction:column;gap:.25rem}
        .sbl{width:100%;display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;border-radius:.625rem;font-size:.875rem;font-weight:500;color:var(--c-s500);transition:all .2s}
        .sbl:hover{background:var(--c-s50);color:var(--c-s800)}
        .sbl.on{background:var(--grad);color:#fff;box-shadow:0 4px 15px rgba(139,92,246,.3)}
        .sbl svg{width:20px;height:20px;flex-shrink:0}
        .sbo{display:none;position:fixed;inset:0;background:rgba(0,0,0,.4);z-index:29}

        .mn{flex:1;padding:2rem;max-width:1024px;min-width:0}
        .mt2{font-size:1.875rem;font-weight:700;color:var(--c-s900);margin-bottom:2rem}
        .mh{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.mh .mt2{margin-bottom:0}
        .cd{background:#fff;border-radius:.875rem;border:1px solid var(--c-s200);box-shadow:0 1px 2px rgba(0,0,0,.05);transition:all .3s cubic-bezier(.4,0,.2,1)}
        .cd.hv:hover{transform:translateY(-3px);box-shadow:0 10px 15px -3px rgba(0,0,0,.08)}
        .cb{padding:1.5rem}
        .sg{display:grid;grid-template-columns:repeat(3,1fr);gap:1.5rem;margin-bottom:2rem}
        .sh{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}
        .sl2{font-size:1rem;font-weight:600;color:var(--c-s900)}
        .si svg{width:32px;height:32px}
        .sv{font-size:1.75rem;font-weight:700;color:var(--c-s900)}
        .sd2{font-size:.875rem;color:var(--c-s400);margin-top:.25rem}
        .sd{font-size:.875rem;color:var(--c-s500);line-height:1.8}.sd strong{color:var(--c-s900);font-weight:600}
        .bg{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}
        .rt2{font-size:1.25rem;font-weight:700;color:var(--c-s900);margin-bottom:1rem}
        .ri{padding:1rem;background:var(--c-s50);border-radius:.625rem;margin-bottom:.75rem;cursor:pointer;transition:background .2s}
        .ri:last-child{margin-bottom:0}.ri:hover{background:var(--c-s100)}
        .rit{font-size:.875rem;font-weight:600;color:var(--c-s900);margin-bottom:.25rem}
        .rib{font-size:.75rem;color:var(--c-s500);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
        .rid{font-size:.75rem;color:var(--c-s400);margin-top:.5rem}
        .qp{background:var(--grad);border-radius:.875rem;padding:1.5rem;color:#fff;box-shadow:0 8px 25px rgba(139,92,246,.35)}
        .qp h3{font-size:1.25rem;font-weight:700;margin-bottom:1rem}
        .qb{width:100%;display:flex;align-items:center;justify-content:space-between;padding:1rem;background:rgba(255,255,255,.12);border-radius:.625rem;color:#fff;font-size:.875rem;font-weight:500;backdrop-filter:blur(4px);margin-bottom:.75rem;transition:background .2s}
        .qb:last-child{margin-bottom:0}.qb:hover{background:rgba(255,255,255,.22)}.qb svg{width:20px;height:20px}
        .ba{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.25rem;background:var(--grad);border-radius:.625rem;color:#fff;font-size:.875rem;font-weight:600;box-shadow:0 4px 15px rgba(139,92,246,.3);transition:all .2s}
        .ba:hover{transform:translateY(-1px);box-shadow:0 8px 25px rgba(139,92,246,.35)}.ba svg{width:18px;height:18px}
        .nc{margin-bottom:1rem}
        .nct{display:flex;justify-content:space-between;align-items:flex-start}
        .nci{flex:1;min-width:0}
        .ncti{font-size:1.25rem;font-weight:700;color:var(--c-s900);margin-bottom:.5rem}
        .ncc{font-size:.875rem;color:var(--c-s600);white-space:pre-wrap;line-height:1.7}
        .nca{display:flex;gap:.25rem;flex-shrink:0;margin-left:1rem}
        .nca button{padding:.5rem;border-radius:.375rem;transition:all .2s}.nca button svg{width:16px;height:16px}
        .ae{color:var(--c-p500)}.ae:hover{background:var(--c-p50)}
        .ad2{color:var(--c-err500)}.ad2:hover{background:var(--c-err50)}
        .ncm{display:flex;align-items:center;gap:1rem;font-size:.75rem;color:var(--c-s400);margin-top:1rem;padding-top:1rem;border-top:1px solid var(--c-s100)}
        .ncm span{display:inline-flex;align-items:center;gap:.25rem}.ncm svg{width:14px;height:14px}
        .em{text-align:center;padding:4rem 2rem}.em svg{width:64px;height:64px;color:var(--c-s300);margin:0 auto 1rem}
        .em p{font-size:1.125rem;color:var(--c-s400)}.em .es{font-size:.875rem;color:var(--c-s300);margin-top:.5rem}
        .atb{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:2rem}
        .abt{padding:2.5rem;border-radius:.875rem;font-size:1.125rem;font-weight:700;text-align:center;transition:all .3s cubic-bezier(.4,0,.2,1)}
        .abt svg{width:48px;height:48px;margin:0 auto .75rem;display:block}
        .abt .as{font-size:.875rem;font-weight:400;margin-top:.5rem;opacity:.9}
        .abt.ain{background:var(--grad-ok);color:#fff;box-shadow:0 8px 20px rgba(16,185,129,.3)}
        .abt.ain:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 28px rgba(16,185,129,.4)}
        .abt.aout{background:var(--grad-err);color:#fff;box-shadow:0 8px 20px rgba(249,115,22,.3)}
        .abt.aout:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 28px rgba(249,115,22,.4)}
        .abt:disabled{background:var(--c-s200);color:var(--c-s400);cursor:not-allowed;box-shadow:none}.abt:disabled:hover{transform:none}
        .ath{padding:1.5rem;border-bottom:1px solid var(--c-s200);background:var(--c-s50);border-radius:.875rem .875rem 0 0}
        .ath h3{font-size:1.25rem;font-weight:700;color:var(--c-s900)}
        table{width:100%;border-collapse:collapse}table thead{background:var(--c-s50)}
        table th{padding:.75rem 1.5rem;text-align:left;font-size:.75rem;font-weight:600;color:var(--c-s500);text-transform:uppercase;letter-spacing:.05em}
        table td{padding:1rem 1.5rem;font-size:.875rem;color:var(--c-s800);border-top:1px solid var(--c-s100)}
        table tbody tr{transition:background .15s}table tbody tr:hover{background:var(--c-s50)}
        .bdg{display:inline-block;padding:.25rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:600}
        .bdg.bok{background:var(--c-ok100);color:var(--c-ok800)}.bdg.bwn{background:var(--c-w100);color:var(--c-w800)}

        @media(max-width:1024px){.sg{grid-template-columns:repeat(2,1fr)}.sg .cd:last-child{grid-column:span 2}}
        @media(max-width:768px){
            .ahm{display:block}.sb{position:fixed;top:var(--hh);left:0;bottom:0;z-index:30;transform:translateX(-100%)}
            .sb.op{transform:translateX(0)}.sbo.vi{display:block}.mn{padding:1rem}
            .sg{grid-template-columns:1fr}.sg .cd:last-child{grid-column:span 1}
            .bg{grid-template-columns:1fr}.atb{grid-template-columns:1fr}.lt{display:none}
            .lb h1{font-size:2.25rem}.lc{padding:1.5rem}
        }
    </style>
</head>
<body>
<div id="tc" class="tc" aria-live="polite"></div>

<!-- LOGIN -->
<div id="pgLogin" class="pg-login">
<div class="lw asu">
    <div class="lb"><h1 class="logo">WorkHub</h1><p>ê¸°ì—…ì„ ìœ„í•œ ìŠ¤ë§ˆíŠ¸ ê·¸ë£¹ì›¨ì–´</p></div>
    <div class="lc">
        <h2>ë¡œê·¸ì¸</h2>
        <button id="gBtn" class="gbtn" onclick="App.auth.loginGoogle()">
            <svg viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
            <span id="gBtnTxt">Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸</span>
        </button>
        <div id="errBox" class="err-box"></div>
        <p id="fbStat" class="fbs" style="color:var(--c-s400)" onclick="App.ui.showFbModal()">âš™ï¸ Firebase ì„¤ì • â€” í´ë¦­í•˜ì—¬ ì„¤ì •</p>

        <div class="dv"><span>ë˜ëŠ”</span></div>
        <form onsubmit="return false">
            <div class="ff"><label for="lName">ì´ë¦„</label><input class="fi2" type="text" id="lName" placeholder="í™ê¸¸ë™" value="í™ê¸¸ë™" autocomplete="name"></div>
            <div class="ff"><label for="lEmail">ì´ë©”ì¼</label><input class="fi2" type="email" id="lEmail" placeholder="user@company.com" value="user@company.com" autocomplete="email"></div>
            <button class="lsub" type="button" onclick="App.auth.loginForm()">ë¡œê·¸ì¸</button>
        </form>
        <p class="lfooter">Google ë¡œê·¸ì¸ ë˜ëŠ” ê°„í¸ ë¡œê·¸ì¸ìœ¼ë¡œ ì‹œì‘í•˜ì„¸ìš”</p>
    </div>
</div>
</div>

<!-- FIREBASE MODAL -->
<div id="fbModal" class="mb" hidden>
<div class="md mdg asu">
    <h3>Firebase í”„ë¡œì íŠ¸ ì„¤ì •</h3>
    <p class="desc">Google ë¡œê·¸ì¸ì„ ì‚¬ìš©í•˜ë ¤ë©´ Firebase í”„ë¡œì íŠ¸ì™€ Google Cloud OAuth Client IDê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
    <div class="guide">
        <p class="gt">ğŸ“‹ ì„¤ì • ê°€ì´ë“œ:</p>
        <ol>
            <li><a href="https://console.firebase.google.com/" target="_blank">Firebase Console</a> â†’ <strong>í”„ë¡œì íŠ¸ ì¶”ê°€</strong></li>
            <li><strong>Authentication â†’ ì‹œì‘í•˜ê¸°</strong> â†’ Sign-in method â†’ <strong>Google ì‚¬ìš© ì„¤ì •</strong></li>
            <li>í”„ë¡œì íŠ¸ ì„¤ì •(âš™ï¸) â†’ <strong>ì›¹ ì•± ì¶”ê°€</strong>(<code>&lt;/&gt;</code>) â†’ config ê°’ ë³µì‚¬</li>
            <li><a href="https://console.cloud.google.com/apis/credentials" target="_blank">Google Cloud Console</a> â†’ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ â†’ <strong>OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID</strong> ë³µì‚¬</li>
        </ol>
    </div>
    <div class="domain-info">
        ğŸ“Œ Google Cloud Console â†’ OAuth í´ë¼ì´ì–¸íŠ¸ â†’ <strong>ìŠ¹ì¸ëœ JavaScript ì›ë³¸</strong>ì—<br>
        í˜„ì¬ ì£¼ì†Œ <code id="curOrigin"></code> ì„(ë¥¼) ë°˜ë“œì‹œ ì¶”ê°€í•˜ì„¸ìš”!
    </div>
    <div class="cfs" style="margin-top:1rem">
        <div><label>Firebase API Key</label><input type="text" id="cfgKey" placeholder="AIzaSy..."></div>
        <div><label>Firebase Auth Domain</label><input type="text" id="cfgDomain" placeholder="my-app.firebaseapp.com"></div>
        <div><label>Firebase Project ID</label><input type="text" id="cfgProject" placeholder="my-app-12345"></div>
        <div style="margin-top:.5rem;padding-top:.75rem;border-top:1px solid var(--c-s600)">
            <label>Google OAuth Client ID <span style="color:var(--c-err500)">*í•„ìˆ˜</span></label>
            <input type="text" id="cfgClientId" placeholder="123456789-abc.apps.googleusercontent.com">
        </div>
    </div>
    <div class="ma"><button class="bp" onclick="App.fb.save()">ì„¤ì • ì™„ë£Œ</button><button class="bs" onclick="App.ui.hideFbModal()">ì·¨ì†Œ</button></div>
    <p class="mtip">ğŸ’¡ Firebase ì—†ì´ë„ ê°„í¸ ë¡œê·¸ì¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
</div>
</div>

<!-- APP -->
<div id="app" hidden>
<header class="ah"><div class="ahi">
    <div class="ahl">
        <button class="ahm" onclick="App.ui.toggleSb()" aria-label="ë©”ë‰´"><svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button>
        <span class="ahlogo logo">WorkHub</span>
    </div>
    <div class="ahr">
        <div class="ahu"><span id="hAv"></span><span id="hNm" class="ahun"></span></div>
        <button class="ahlo" onclick="App.auth.logout()"><svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg><span class="lt">ë¡œê·¸ì•„ì›ƒ</span></button>
    </div>
</div></header>
<div class="al">
    <div id="sbOv" class="sbo" onclick="App.ui.closeSb()"></div>
    <aside id="sb2" class="sb"><nav class="sbn">
        <button class="sbl on" data-p="dashboard" onclick="App.rt.go('dashboard')"><svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span>ëŒ€ì‹œë³´ë“œ</span></button>
        <button class="sbl" data-p="notices" onclick="App.rt.go('notices')"><svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg><span>ê³µì§€ì‚¬í•­</span></button>
        <button class="sbl" data-p="attendance" onclick="App.rt.go('attendance')"><svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg><span>ê·¼íƒœê´€ë¦¬</span></button>
    </nav></aside>
    <main class="mn">
        <section id="pgDash" class="asr">
            <h2 class="mt2">ëŒ€ì‹œë³´ë“œ</h2>
            <div class="sg">
                <div class="cd hv"><div class="cb"><div class="sh"><h3 class="sl2">ì˜¤ëŠ˜ì˜ ê·¼íƒœ</h3><span class="si" style="color:var(--c-p500)"><svg width="32" height="32" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></span></div><div id="dAtt" class="sd"><span style="color:var(--c-s400)">ì•„ì§ ì¶œê·¼ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</span></div></div></div>
                <div class="cd hv"><div class="cb"><div class="sh"><h3 class="sl2">ì „ì²´ ê³µì§€ì‚¬í•­</h3><span class="si" style="color:var(--c-a500)"><svg width="32" height="32" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg></span></div><p id="dNC" class="sv">0</p><p class="sd2">ë“±ë¡ëœ ê³µì§€</p></div></div>
                <div class="cd hv"><div class="cb"><div class="sh"><h3 class="sl2">ì´ë²ˆ ë‹¬ ê·¼ë¬´</h3><span class="si" style="color:var(--c-ok500)"><svg width="32" height="32" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></span></div><p id="dMD" class="sv">0ì¼</p><p class="sd2">ì¶œê·¼ ì¼ìˆ˜</p></div></div>
            </div>
            <div class="bg">
                <div class="cd"><div class="cb"><h3 class="rt2">ìµœê·¼ ê³µì§€ì‚¬í•­</h3><div id="dRN"><div style="padding:2rem;text-align:center;color:var(--c-s400);font-size:.875rem">ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤</div></div></div></div>
                <div class="qp"><h3>ë¹ ë¥¸ ì‹œì‘</h3><button class="qb" onclick="App.rt.go('notices')"><span>ê³µì§€ì‚¬í•­ í™•ì¸í•˜ê¸°</span><svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg></button><button class="qb" onclick="App.rt.go('attendance')"><span>ê·¼íƒœ ê´€ë¦¬í•˜ê¸°</span><svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg></button></div>
            </div>
        </section>
        <section id="pgNot" hidden><div class="mh"><h2 class="mt2">ê³µì§€ì‚¬í•­</h2><button class="ba" onclick="App.nt.open()"><svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg><span>ìƒˆ ê³µì§€ì‚¬í•­</span></button></div><div id="nList"></div></section>
        <section id="pgAtt" hidden>
            <h2 class="mt2">ê·¼íƒœê´€ë¦¬</h2>
            <div class="atb">
                <button id="bIn" class="abt ain" onclick="App.at.checkIn()"><svg width="48" height="48" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg><div>ì¶œê·¼í•˜ê¸°</div><div id="sIn" class="as"></div></button>
                <button id="bOut" class="abt aout" disabled onclick="App.at.checkOut()"><svg width="48" height="48" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg><div>í‡´ê·¼í•˜ê¸°</div><div id="sOut" class="as"></div></button>
            </div>
            <div class="cd"><div class="ath"><h3>ê·¼íƒœ ê¸°ë¡</h3></div><div id="aTab"></div></div>
        </section>
    </main>
</div>
</div>

<div id="nModal" class="mb" hidden><div class="md mdw asu">
    <h3 id="nmT" style="color:var(--c-s900)">ìƒˆ ê³µì§€ì‚¬í•­</h3>
    <div class="ff"><label for="nTi" style="color:var(--c-s700)">ì œëª©</label><input class="fi2 fi2w" type="text" id="nTi" placeholder="ì œëª©"></div>
    <div class="ff"><label for="nCo" style="color:var(--c-s700)">ë‚´ìš©</label><textarea class="fi2 fi2w" id="nCo" rows="8" placeholder="ë‚´ìš©"></textarea></div>
    <div class="ma"><button id="nmS" class="bp" onclick="App.nt.save()">ë“±ë¡</button><button class="bsw" onclick="App.nt.close()">ì·¨ì†Œ</button></div>
</div></div>

<div id="cfmD" class="mb" hidden><div class="md mdw asu" style="max-width:400px;padding:2rem">
    <h3 style="color:var(--c-s900);font-size:1.125rem" id="cfmM"></h3>
    <div class="ma"><button class="bp" id="cfmY" style="background:var(--c-err500)">ì‚­ì œ</button><button class="bsw" onclick="App.ui.hideCfm()">ì·¨ì†Œ</button></div>
</div></div>

<script>
const App=(()=>{
'use strict';
const $=id=>document.getElementById(id);

const U={
    fmtD(s){try{return new Date(s).toLocaleDateString('ko-KR',{year:'numeric',month:'long',day:'numeric'})}catch{return''}},
    fmtDT(s){try{return new Date(s).toLocaleString('ko-KR')}catch{return''}},
    fmtT(){return new Date().toLocaleTimeString('ko-KR',{hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:false})},
    sameDay(a,b){return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()},
    curMonth(s){const d=new Date(s),n=new Date();return d.getMonth()===n.getMonth()&&d.getFullYear()===n.getFullYear()},
    uid(){return Date.now().toString(36)+Math.random().toString(36).substr(2,8)},
    esc(s){if(!s)return'';const d=document.createElement('div');d.textContent=s;return d.innerHTML},
    trunc(s,m=80){return(!s||s.length<=m)?s||'':s.substring(0,m)+'â€¦'},
    decJwt(t){try{const b=t.split('.')[1].replace(/-/g,'+').replace(/_/g,'/');return JSON.parse(decodeURIComponent(atob(b).split('').map(c=>'%'+('00'+c.charCodeAt(0).toString(16)).slice(-2)).join('')))}catch{return null}}
};

const LS={_p:'wh_',get(k){try{const v=localStorage.getItem(this._p+k);return v?JSON.parse(v):null}catch{return null}},set(k,v){try{localStorage.setItem(this._p+k,JSON.stringify(v))}catch{}},rm(k){try{localStorage.removeItem(this._p+k)}catch{}}};

const S={user:null,pg:'dashboard',notices:[],att:[],today:null,editId:null,sbOpen:false,fbReady:false,clientId:''};

const T={init(){this._c=$('tc')},show(m,t='inf',d=3500){const e=document.createElement('div');e.className=`tt ${t}`;e.textContent=m;this._c.appendChild(e);setTimeout(()=>{e.classList.add('rm');e.addEventListener('animationend',()=>e.remove())},d)},ok(m){this.show(m,'ok')},er(m){this.show(m,'er',5000)},inf(m){this.show(m,'inf')}};

// â”€â”€ Firebase + Google Identity Services â”€â”€
const FB={
    _auth:null,

    load(){
        const c=LS.get('fb_cfg2');
        if(c&&c.apiKey&&c.authDomain&&c.projectId&&c.clientId){
            S.clientId=c.clientId;
            return this._init(c);
        }
        return false;
    },

    save(){
        const apiKey=$('cfgKey').value.trim(),
              authDomain=$('cfgDomain').value.trim(),
              projectId=$('cfgProject').value.trim(),
              clientId=$('cfgClientId').value.trim();
        if(!apiKey||!authDomain||!projectId||!clientId){T.er('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');return}
        const c={apiKey,authDomain,projectId,clientId};
        LS.set('fb_cfg2',c);
        S.clientId=clientId;
        if(this._init(c)){UI.hideFbModal();T.ok('ì„¤ì • ì™„ë£Œ! Google ë¡œê·¸ì¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.')}
    },

    _init(c){
        try{
            try{firebase.app().delete().catch(()=>{})}catch{}
            firebase.initializeApp({apiKey:c.apiKey,authDomain:c.authDomain,projectId:c.projectId});
            this._auth=firebase.auth();
            this._auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL);

            // ìë™ ë¡œê·¸ì¸ ê°ì§€
            this._auth.onAuthStateChanged(user=>{
                if(user&&!S.user){
                    S.user={name:user.displayName||user.email.split('@')[0],email:user.email,picture:user.photoURL||null,uid:user.uid,provider:'google'};
                    LS.set('sess',S.user);
                    AUTH._onLogin();
                }
            });

            S.fbReady=true;
            UI.updateFbStat(true);
            console.log('[FB] OK');
            return true;
        }catch(e){
            console.error('[FB]',e);
            T.er('Firebase ì´ˆê¸°í™” ì‹¤íŒ¨ â€” ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
            S.fbReady=false;
            UI.updateFbStat(false);
            return false;
        }
    }
};

// â”€â”€ Auth â”€â”€
const AUTH={
    loginForm(){
        const name=$('lName').value.trim(),email=$('lEmail').value.trim();
        if(!name||!email){T.er('ì´ë¦„ê³¼ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');return}
        if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){T.er('ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');return}
        S.user={name,email,picture:null,provider:'form'};
        LS.set('sess',S.user);UI.hideErrBox();this._onLogin();
    },

    /**
     * í•µì‹¬ ë³€ê²½: signInWithPopup ëŒ€ì‹ 
     * Google Identity Servicesë¡œ í† í° â†’ signInWithCredential
     * iframe, íŠ¹ìˆ˜í™˜ê²½ ëª¨ë‘ ë™ì‘
     */
    loginGoogle(){
        if(!S.fbReady||!S.clientId){T.inf('ë¨¼ì € Firebase ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.');UI.showFbModal();return}

        const btn=$('gBtn'),txt=$('gBtnTxt');
        btn.disabled=true;
        txt.innerHTML='<span class="spinner"></span> Google ë¡œê·¸ì¸ ì¤€ë¹„ ì¤‘...';
        UI.hideErrBox();

        try{
            // Google Identity Services â€” One Tapì´ ì•„ë‹Œ ë²„íŠ¼ í´ë¦­ ë°©ì‹
            if(!window.google||!window.google.accounts){
                UI.showErrBox('<strong>âš ï¸ Google ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ ì‹¤íŒ¨</strong><br>í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
                btn.disabled=false;txt.textContent='Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸';
                return;
            }

            google.accounts.id.initialize({
                client_id: S.clientId,
                callback: (response)=> this._handleGoogleCredential(response),
                auto_select: false,
                cancel_on_tap_outside: true,
            });

            // promptë¥¼ ì§ì ‘ í˜¸ì¶œ â€” ê³„ì • ì„ íƒ UIê°€ ëœ¸
            google.accounts.id.prompt((notification)=>{
                if(notification.isNotDisplayed()){
                    const reason=notification.getNotDisplayedReason();
                    console.log('[GIS] Not displayed:',reason);

                    // promptê°€ ì•ˆ ëœ¨ë©´ ìˆ˜ë™ ë²„íŠ¼ ë Œë”ë§ìœ¼ë¡œ fallback
                    this._fallbackRenderButton();
                } else if(notification.isSkippedMoment()){
                    console.log('[GIS] Skipped:',notification.getSkippedReason());
                    this._fallbackRenderButton();
                } else if(notification.isDismissedMoment()){
                    console.log('[GIS] Dismissed:',notification.getDismissedReason());
                    btn.disabled=false;
                    txt.textContent='Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸';
                    if(notification.getDismissedReason()==='credential_returned'){
                        // ì„±ê³µ â€” callbackì´ ì²˜ë¦¬
                    } else {
                        T.inf('ë¡œê·¸ì¸ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    }
                }
            });

        }catch(e){
            console.error('[Auth]',e);
            UI.showErrBox(`<strong>âŒ ì˜¤ë¥˜ ë°œìƒ</strong><br>${U.esc(e.message)}`);
            T.er('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            btn.disabled=false;txt.textContent='Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸';
        }
    },

    /** prompt ì•ˆ ëœ° ë•Œ: í™”ë©´ì— êµ¬ê¸€ ë¡œê·¸ì¸ ë²„íŠ¼ ì§ì ‘ ë Œë” */
    _fallbackRenderButton(){
        const btn=$('gBtn'),txt=$('gBtnTxt');

        // ê¸°ì¡´ ë²„íŠ¼ì„ êµ¬ê¸€ ë Œë” ë²„íŠ¼ìœ¼ë¡œ êµì²´
        const container=document.createElement('div');
        container.id='gsiButtonWrap';
        container.style.cssText='display:flex;justify-content:center;margin-bottom:.5rem';
        btn.parentNode.insertBefore(container,btn);
        btn.style.display='none';

        google.accounts.id.renderButton(container,{
            theme:'outline',
            size:'large',
            width:380,
            text:'signin_with',
            locale:'ko'
        });

        // ì•ˆë‚´ ë©”ì‹œì§€
        UI.showErrBox('<strong>ğŸ‘† ìœ„ Google ë²„íŠ¼ì„ í´ë¦­í•´ì£¼ì„¸ìš”</strong><br>í˜„ì¬ í™˜ê²½ì—ì„œëŠ” Google ê³µì‹ ë¡œê·¸ì¸ ë²„íŠ¼ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.');
    },

    /** GISì—ì„œ credential ë°›ì€ í›„ Firebase ë¡œê·¸ì¸ */
    async _handleGoogleCredential(response){
        const btn=$('gBtn'),txt=$('gBtnTxt');

        // gsiButtonWrapì´ ìˆìœ¼ë©´ ì›ë³µ
        const wrap=document.getElementById('gsiButtonWrap');
        if(wrap){wrap.remove();btn.style.display='';}

        btn.disabled=true;
        txt.innerHTML='<span class="spinner"></span> ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘...';
        UI.hideErrBox();

        try{
            const idToken=response.credential;

            // Firebaseì— credentialë¡œ ë¡œê·¸ì¸ (íŒì—…/ë¦¬ë‹¤ì´ë ‰íŠ¸ í•„ìš” ì—†ìŒ!)
            const credential=firebase.auth.GoogleAuthProvider.credential(idToken);
            const result=await FB._auth.signInWithCredential(credential);
            const u=result.user;

            S.user={
                name:u.displayName||u.email.split('@')[0],
                email:u.email,
                picture:u.photoURL||null,
                uid:u.uid,
                provider:'google'
            };
            LS.set('sess',S.user);
            this._onLogin();

        }catch(e){
            console.error('[Auth] Firebase credential error:',e);
            let html=`<strong>âŒ Firebase ì¸ì¦ ì‹¤íŒ¨</strong><br><br>ì˜¤ë¥˜: ${U.esc(e.code||'')}<br>${U.esc(e.message||'')}`;
            if(e.code==='auth/invalid-api-key'){
                html+=`<br><br><a onclick="App.ui.showFbModal()">Firebase ì„¤ì • ë‹¤ì‹œ í•˜ê¸°</a>`;
            }
            UI.showErrBox(html);
            T.er('Firebase ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }finally{
            btn.disabled=false;
            txt.textContent='Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸';
        }
    },

    _onLogin(){
        UI.hideErrBox();
        NT._load();AT._load();AT._findToday();
        UI.showApp();RT.go('dashboard');
        T.ok(`${S.user.name}ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤!`);
    },

    async logout(){
        // Firebase ë¡œê·¸ì•„ì›ƒ
        if(S.fbReady&&FB._auth){try{await FB._auth.signOut()}catch{}}
        // Google ìë™ì„ íƒ í•´ì œ
        if(window.google&&window.google.accounts){
            try{google.accounts.id.disableAutoSelect()}catch{}
        }
        S.user=null;S.notices=[];S.att=[];S.today=null;S.pg='dashboard';
        LS.rm('sess');

        // fallback ë²„íŠ¼ ì •ë¦¬
        const wrap=document.getElementById('gsiButtonWrap');
        if(wrap){wrap.remove();$('gBtn').style.display='';}

        UI.showLogin();T.inf('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.');
    },

    restore(){
        if(S.fbReady)return false;
        const s=LS.get('sess');
        if(s&&s.name&&s.email&&s.provider==='form'){S.user=s;this._onLogin();return true}
        return false;
    }
};

// â”€â”€ Router â”€â”€
const RT={
    _p:['dashboard','notices','attendance'],
    _el:{dashboard:'pgDash',notices:'pgNot',attendance:'pgAtt'},
    go(p){
        if(!this._p.includes(p))return;S.pg=p;
        this._p.forEach(x=>{const el=$(this._el[x]);if(el){el.hidden=(x!==p);if(x===p){el.classList.remove('asr');void el.offsetWidth;el.classList.add('asr')}}});
        document.querySelectorAll('.sbl').forEach(b=>b.classList.toggle('on',b.dataset.p===p));
        UI.closeSb();
        ({dashboard:()=>UI.rDash(),notices:()=>UI.rNot(),attendance:()=>UI.rAtt()})[p]();
    }
};

// â”€â”€ Notices â”€â”€
const NT={
    _load(){S.notices=LS.get('notices')||[]},_save(){LS.set('notices',S.notices)},
    open(id=null){S.editId=id;const t=$('nTi'),c=$('nCo');if(id){const n=S.notices.find(x=>x.id===id);if(!n)return;t.value=n.title;c.value=n.content;$('nmT').textContent='ê³µì§€ì‚¬í•­ ìˆ˜ì •';$('nmS').textContent='ìˆ˜ì •'}else{t.value='';c.value='';$('nmT').textContent='ìƒˆ ê³µì§€ì‚¬í•­';$('nmS').textContent='ë“±ë¡'}$('nModal').hidden=false;t.focus()},
    close(){$('nModal').hidden=true;S.editId=null},
    save(){const t=$('nTi').value.trim(),c=$('nCo').value.trim();if(!t||!c){T.er('ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');return}if(S.editId){const i=S.notices.findIndex(n=>n.id===S.editId);if(i!==-1)S.notices[i]={...S.notices[i],title:t,content:c,updatedAt:new Date().toISOString()};T.ok('ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.')}else{S.notices.unshift({id:U.uid(),title:t,content:c,author:S.user.name,createdAt:new Date().toISOString()});T.ok('ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.')}this._save();this.close();UI.rNot()},
    del(id){UI.showCfm('ì´ ê³µì§€ì‚¬í•­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?',()=>{S.notices=S.notices.filter(n=>n.id!==id);this._save();UI.rNot();T.ok('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.')})}
};

// â”€â”€ Attendance â”€â”€
const AT={
    _k(){return S.user?`att_${S.user.email}`:null},
    _load(){const k=this._k();S.att=k?(LS.get(k)||[]):[]},
    _save(){const k=this._k();if(k)LS.set(k,S.att)},
    _findToday(){const n=new Date();S.today=S.att.find(a=>U.sameDay(new Date(a.date),n))||null},
    checkIn(){if(S.today){T.er('ì˜¤ëŠ˜ ì´ë¯¸ ì¶œê·¼ ê¸°ë¡ì´ ìˆìŠµë‹ˆë‹¤.');return}const r={id:U.uid(),date:new Date().toISOString(),checkIn:U.fmtT(),checkOut:null};S.att.unshift(r);S.today=r;this._save();UI.rAtt();UI.rDash();T.ok('ì¶œê·¼ì´ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.')},
    checkOut(){if(!S.today){T.er('ì¶œê·¼ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.');return}if(S.today.checkOut){T.er('ì´ë¯¸ í‡´ê·¼ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.');return}S.today.checkOut=U.fmtT();this._save();UI.rAtt();UI.rDash();T.ok('í‡´ê·¼ ê¸°ë¡ ì™„ë£Œ!')}
};

// â”€â”€ UI â”€â”€
const UI={
    showApp(){$('pgLogin').hidden=true;$('app').hidden=false;this.rHeader()},
    showLogin(){$('pgLogin').hidden=false;$('app').hidden=true},
    rHeader(){if(!S.user)return;$('hNm').textContent=S.user.name;const a=$('hAv');a.innerHTML=S.user.picture?`<img class="ahav" src="${U.esc(S.user.picture)}" alt="" referrerpolicy="no-referrer">`:`<span class="ahaf"><svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></span>`},
    toggleSb(){S.sbOpen=!S.sbOpen;$('sb2').classList.toggle('op',S.sbOpen);$('sbOv').classList.toggle('vi',S.sbOpen)},
    closeSb(){S.sbOpen=false;$('sb2').classList.remove('op');$('sbOv').classList.remove('vi')},
    updateFbStat(ok){const e=$('fbStat');if(ok){e.textContent='âœ… ì„¤ì • ì™„ë£Œ â€” Google ë¡œê·¸ì¸ ì‚¬ìš© ê°€ëŠ¥';e.style.color='#22c55e'}else{e.textContent='âš™ï¸ Firebase ì„¤ì • â€” í´ë¦­í•˜ì—¬ ì„¤ì •';e.style.color='var(--c-s400)'}},
    showFbModal(){$('fbModal').hidden=false;$('curOrigin').textContent=location.origin||location.href;$('cfgKey').focus()},
    hideFbModal(){$('fbModal').hidden=true},
    showErrBox(h){const b=$('errBox');b.innerHTML=h;b.classList.add('show')},
    hideErrBox(){const b=$('errBox');b.innerHTML='';b.classList.remove('show')},
    showCfm(m,fn){$('cfmM').textContent=m;$('cfmD').hidden=false;$('cfmY').onclick=()=>{$('cfmD').hidden=true;fn()}},
    hideCfm(){$('cfmD').hidden=true},

    rDash(){
        const d=$('dAtt');
        if(S.today){let h=`ì¶œê·¼: <strong>${U.esc(S.today.checkIn)}</strong>`;if(S.today.checkOut)h+=`<br>í‡´ê·¼: <strong>${U.esc(S.today.checkOut)}</strong>`;d.innerHTML=h}
        else d.innerHTML='<span style="color:var(--c-s400)">ì•„ì§ ì¶œê·¼ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</span>';
        $('dNC').textContent=S.notices.length;
        $('dMD').textContent=S.att.filter(a=>U.curMonth(a.date)).length+'ì¼';
        const c=$('dRN'),r=S.notices.slice(0,3);
        c.innerHTML=r.length?r.map(n=>`<div class="ri" onclick="App.rt.go('notices')"><h4 class="rit">${U.esc(n.title)}</h4><p class="rib">${U.esc(U.trunc(n.content,100))}</p><p class="rid">${U.fmtD(n.createdAt)}</p></div>`).join(''):'<div style="padding:2rem;text-align:center;color:var(--c-s400);font-size:.875rem">ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤</div>';
    },
    rNot(){
        const c=$('nList');
        if(!S.notices.length){c.innerHTML='<div class="cd"><div class="cb"><div class="em"><svg width="64" height="64" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg><p>ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤</p><p class="es">ìƒˆ ê³µì§€ì‚¬í•­ì„ ë“±ë¡í•´ë³´ì„¸ìš”</p></div></div></div>';return}
        c.innerHTML=S.notices.map(n=>`<div class="cd hv nc"><div class="cb"><div class="nct"><div class="nci"><h3 class="ncti">${U.esc(n.title)}</h3><p class="ncc">${U.esc(n.content)}</p></div><div class="nca"><button class="ae" onclick="App.nt.open('${n.id}')"><svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button><button class="ad2" onclick="App.nt.del('${n.id}')"><svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg></button></div></div><div class="ncm"><span><svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>${U.esc(n.author)}</span><span>${U.fmtDT(n.createdAt)}</span></div></div></div>`).join('');
    },
    rAtt(){
        const t=S.today,bi=$('bIn'),bo=$('bOut'),si=$('sIn'),so=$('sOut');
        if(t){bi.disabled=true;si.textContent='ì¶œê·¼: '+t.checkIn;if(t.checkOut){bo.disabled=true;so.textContent='í‡´ê·¼: '+t.checkOut}else{bo.disabled=false;so.textContent=''}}
        else{bi.disabled=false;bo.disabled=true;si.textContent='';so.textContent=''}
        const c=$('aTab');
        if(!S.att.length){c.innerHTML='<div class="em"><svg width="64" height="64" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><p>ê·¼íƒœ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</p><p class="es">ì¶œê·¼ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë“±ë¡í•˜ì„¸ìš”</p></div>';return}
        c.innerHTML=`<div style="overflow-x:auto"><table><thead><tr><th>ë‚ ì§œ</th><th>ì¶œê·¼</th><th>í‡´ê·¼</th><th>ìƒíƒœ</th></tr></thead><tbody>${S.att.map(r=>`<tr><td>${U.fmtD(r.date)}</td><td>${U.esc(r.checkIn)}</td><td>${r.checkOut?U.esc(r.checkOut):'â€”'}</td><td><span class="bdg ${r.checkOut?'bok':'bwn'}">${r.checkOut?'í‡´ê·¼ ì™„ë£Œ':'ê·¼ë¬´ ì¤‘'}</span></td></tr>`).join('')}</tbody></table></div>`;
    }
};

function init(){
    T.init();
    $('curOrigin').textContent=location.origin||location.href;
    FB.load();
    const cfg=LS.get('fb_cfg2');
    if(cfg){$('cfgKey').value=cfg.apiKey||'';$('cfgDomain').value=cfg.authDomain||'';$('cfgProject').value=cfg.projectId||'';$('cfgClientId').value=cfg.clientId||''}
    AUTH.restore();
    document.addEventListener('keydown',e=>{if(e.key==='Escape'){$('fbModal').hidden=true;$('nModal').hidden=true;$('cfmD').hidden=true}});
    ['fbModal','nModal','cfmD'].forEach(id=>{$(id).addEventListener('click',e=>{if(e.target===e.currentTarget)e.currentTarget.hidden=true})});
    console.log('[WorkHub] Ready');
}

if(document.readyState==='loading')document.addEventListener('DOMContentLoaded',init);else init();
return{store:S,ui:UI,auth:AUTH,fb:FB,rt:RT,nt:NT,at:AT};
})();
</script>
</body>
</html>
