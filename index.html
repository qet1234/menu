<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NATRIS HR Integrated Portal</title>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore-compat.js"></script>
    
    <link rel="stylesheet" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        :root {
            --gw-main: #2563eb; --gw-sidebar: #1e293b; --gw-bg: #f8fafc;
            --gw-border: #e2e8f0; --text-strong: #0f172a; --text-body: #334155;
            --text-sub: #64748b; --white: #ffffff; --point-orange: #f59e0b; --naver-green: #03c75a;
        }
        * { box-sizing: border-box; transition: all 0.2s ease-out; }
        body { margin: 0; font-family: "Pretendard Variable", sans-serif; color: var(--text-body); background-color: var(--gw-bg); display: flex; min-height: 100vh; overflow: hidden; }

        /* --- ë¡œê·¸ì¸ ì˜¤ë²„ë ˆì´ --- */
        #loginOverlay { position: fixed; top:0; left:0; width:100%; height:100%; background: var(--gw-sidebar); z-index: 1000; display: flex; align-items: center; justify-content: center; }
        .login-box { background: white; padding: 40px; border-radius: 16px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.2); width: 350px; }

        /* --- ì‚¬ì´ë“œë°” --- */
        nav { width: 250px; background: var(--gw-sidebar); color: white; display: flex; flex-direction: column; flex-shrink: 0; }
        .nav-header { padding: 30px 24px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .nav-menu { padding: 20px 0; flex: 1; overflow-y: auto; }
        .menu-cat { padding: 15px 24px 5px; font-size: 11px; color: #94a3b8; text-transform: uppercase; letter-spacing: 1px; }
        .menu-item { padding: 13px 24px; display: block; color: #cbd5e1; text-decoration: none; font-size: 14px; cursor: pointer; border-left: 4px solid transparent; }
        .menu-item:hover { background: rgba(255,255,255,0.05); color: white; padding-left: 32px; }
        .menu-item.active { background: rgba(37, 99, 235, 0.15); color: #60a5fa; font-weight: 700; border-left: 4px solid var(--gw-main); }
        .logo-text { font-size: 25pt; font-weight: 900; color: #000; background: #fff; display: block; padding: 10px 0; border-radius: 4px; margin: 20px; text-align: center; }

        /* --- ë©”ì¸ ì»¨í…Œì´ë„ˆ --- */
        #mainContent { display: none; width: 100%; height: 100vh; }
        #mainContent.auth-success { display: flex; }
        .container { flex: 1; display: flex; flex-direction: column; overflow-y: auto; }
        header { height: 64px; background: var(--white); border-bottom: 1px solid var(--gw-border); display: flex; align-items: center; justify-content: space-between; padding: 0 30px; position: sticky; top: 0; z-index: 10; }
        
        main { padding: 30px; display: none; max-width: 1400px; animation: fadeIn 0.4s ease-out; }
        main.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- UI ìš”ì†Œ --- */
        .card { background: var(--white); border-radius: 12px; border: 1px solid var(--gw-border); overflow: hidden; margin-bottom: 24px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .card-header { padding: 18px 24px; border-bottom: 1px solid var(--gw-border); background: #fafafa; font-weight: 700; }
        .card-body { padding: 20px 24px; }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .btn-primary { width: 100%; padding: 12px; background: var(--gw-main); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; }
        .input-box { width: 100%; padding: 10px; border: 1px solid var(--gw-border); border-radius: 6px; margin-bottom: 10px; }
        .q-link { padding: 15px; border-radius: 8px; background: #f1f5f9; text-decoration: none; color: var(--text-body); font-size: 14px; display: flex; align-items: center; gap: 10px; font-weight: 600; }
        .q-link:hover { background: #e2e8f0; transform: translateY(-2px); border-left: 5px solid var(--gw-main); }
        .item-list { list-style: none; padding: 0; margin: 0; }
        .list-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid #f1f5f9; font-size: 13px; }
    </style>
</head>
<body>

    <div id="loginOverlay">
        <div class="login-box">
            <h1 style="color:var(--gw-main); font-weight:900;">NATRIS</h1>
            <input type="password" id="pwInput" class="input-box" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" onkeypress="if(event.keyCode==13) checkPassword()">
            <button class="btn-primary" onclick="checkPassword()">ì‹œìŠ¤í…œ ì ‘ì†</button>
        </div>
    </div>

    <div id="mainContent">
        <nav>
            <div class="nav-header"><h3>ğŸ’  HR PORTAL</h3></div>
            <div class="nav-menu">
                <div class="menu-cat">Main</div>
                <div class="menu-item active" onclick="showPage('page-home', this)">ğŸ  í™ˆ ë°”ë¡œê°€ê¸°</div>
                <div class="menu-item" onclick="showPage('page-supply', this)">ğŸ“¦ ë¹„í’ˆ/íƒë°° ê´€ë¦¬</div>
                <div class="menu-item" onclick="showPage('page-trip', this)">âœˆï¸ ì¶œì¥ ê´€ë¦¬</div>
                <div class="menu-cat">Admin</div>
                <div class="menu-item" onclick="showPage('page-insurance', this)">ğŸ“„ 4ëŒ€ë³´í—˜ ì‹ ê³ </div>
                <div class="menu-cat">Search</div>
                <div class="menu-item" onclick="showPage('page-dinner', this)">ğŸ´ íšŒì‹/ë‹¨ê³¨ ì¥ì†Œ</div>
                <div class="menu-item" onclick="showPage('page-event', this)">ğŸ¢ ê¸°ì—… í–‰ì‚¬ ì¥ì†Œ</div>
            </div>
            <div class="logo-text">NATRIS</div>
        </nav>

        <div class="container">
            <header>
                <div id="dateDisplay" style="font-size: 16px; font-weight: 600; color: var(--text-strong);"></div>
                <div style="display:flex; align-items:center; gap:12px;">
                    <select id="userSlot" class="input-box" style="margin:0; width:120px;" onchange="switchUser()">
                        <option value="slot1" id="opt-slot1">ì‚¬ìš©ì 1</option>
                        <option value="slot2" id="opt-slot2">ì‚¬ìš©ì 2</option>
                        <option value="slot3" id="opt-slot3">ì‚¬ìš©ì 3</option>
                    </select>
                    <button onclick="renameUser()" style="padding:8px 12px; border:1px solid var(--gw-border); background:white; border-radius:6px; cursor:pointer; font-size:13px;">ì´ë¦„ ìˆ˜ì •</button>
                    <div id="timeDisplay" style="font-weight:700; color:var(--gw-main); font-size: 18px; min-width: 100px; text-align: right;"></div>
                </div>
            </header>

            <main id="page-home" class="active">
                <div class="grid-2" style="grid-template-columns: 1fr 380px;">
                    <div class="card"><div class="card-header">ğŸ“… ì „ì‚¬ ê³µìš© ì¼ì •</div>
                        <iframe src="https://calendar.google.com/calendar/embed?height=500&wkst=1&bgcolor=%23ffffff&ctz=Asia%2FSeoul&showTitle=0&showNav=1&showDate=1&showPrint=0&showTabs=1&showCalendars=0&showTz=0" style="width:100%; height:550px; border:none;"></iframe>
                    </div>
                    <div class="card" style="border-top: 4px solid var(--gw-main);"><div class="card-header"><span id="displayUserName">ì‚¬ìš©ì</span>ë‹˜ ì¼ì •</div>
                        <div class="card-body">
                            <input type="text" id="schedTitle" class="input-box" placeholder="ë‚´ìš© ì…ë ¥">
                            <input type="date" id="schedDate" class="input-box">
                            <button class="btn-primary" onclick="addSchedule()">ì¼ì • ë“±ë¡</button>
                            <ul id="scheduleList" class="item-list" style="margin-top:15px;"></ul>
                        </div>
                    </div>
                </div>
            </main>

            <main id="page-supply">
                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">ğŸ›’ ë¹„í’ˆ/ì†Œëª¨í’ˆ êµ¬ë§¤ì²˜ ë°”ë¡œê°€ê¸°</div>
                        <div class="card-body grid-2">
                            <a href="https://coupang.com" target="_blank" class="q-link">ğŸ“¦ ì¿ íŒ¡</a>
                            <a href="https://www.gmarket.co.kr" target="_blank" class="q-link">ğŸ›’ Gë§ˆì¼“</a>
                            <a href="https://www.ssg.com" target="_blank" class="q-link">ğŸ¢ SSG ë‹·ì»´</a>
                            <a href="https://www.cofm.co.kr/" target="_blank" class="q-link">â˜• ì»¤í”¼ëª°</a>
                            <a href="https://www.officedepot.co.kr" target="_blank" class="q-link">ğŸ–‡ï¸ ì˜¤í”¼ìŠ¤ë””í¬</a>
                            <a href="https://www.alpha.co.kr" target="_blank" class="q-link">âœï¸ ì•ŒíŒŒëª°</a>
                        </div>
                    </div>
                    <div class="card" style="border-top: 4px solid var(--gw-main);">
                        <div class="card-header">ğŸ“¢ ìŠ¬ë™ êµ¬ë§¤ ìš”ì²­</div>
                        <div class="card-body">
                            <label style="font-size:12px;">ë¹„í’ˆ êµ¬ë§¤ì²˜ ì„ íƒ</label>
                            <select id="reqShop" class="input-box">
                                <option value="ì¿ íŒ¡">ğŸ“¦ ì¿ íŒ¡</option>
                                <option value="Gë§ˆì¼“">ğŸ›’ Gë§ˆì¼“</option>
                                <option value="SSG ë‹·ì»´">ğŸ¢ SSG ë‹·ì»´</option>
                                <option value="ì»¤í”¼ëª°">â˜• ì»¤í”¼ëª°</option>
                            </select>
                            <button class="btn-primary" onclick="sendSlackMessage()">êµ¬ë§¤ ìš”ì²­ ë³´ë‚´ê¸°</button>
                            <p style="font-size:11px; color:var(--text-sub); margin-top:10px;">* ìƒì„¸ í’ˆëª©ì€ ìŠ¬ë™ ì±„ë„ì—ì„œ ë‹´ë‹¹ìì—ê²Œ ì¶”ê°€ ì „ë‹¬ ë°”ëë‹ˆë‹¤.</p>
                        </div>
                    </div>
                </div>
                <div class="card" style="border: 2px solid var(--naver-green);">
                    <div class="card-header" style="color: var(--naver-green);">ğŸ“¦ ë„¤ì´ë²„ íƒë°° í†µí•© ì¡°íšŒ</div>
                    <div class="card-body" style="display:flex; gap:10px;">
                        <select id="courier" class="input-box" style="flex:1;"><option>CJëŒ€í•œí†µìš´</option><option>ìš°ì²´êµ­íƒë°°</option><option>ë¡¯ë°íƒë°°</option><option>í•œì§„íƒë°°</option><option>ë¡œì  íƒë°°</option></select>
                        <input type="text" id="trackNo" class="input-box" style="flex:2;" placeholder="ìš´ì†¡ì¥ ë²ˆí˜¸">
                        <button onclick="trackPackage()" class="btn-primary" style="width:100px; background:var(--naver-green);">ì¡°íšŒí•˜ê¸°</button>
                    </div>
                </div>
            </main>

            <main id="page-trip">
                <div class="card">
                    <div class="card-header">âœˆï¸ ì¶œì¥ ì˜ˆì•½ ë° ì´ë™ìˆ˜ë‹¨</div>
                    <div class="card-body grid-3">
                        <a href="https://www.skyscanner.co.kr" target="_blank" class="q-link">âœˆï¸ ìŠ¤ì¹´ì´ìŠ¤ìºë„ˆ</a>
                        <a href="https://www.letskorail.com" target="_blank" class="q-link">ğŸš„ KTX ì½”ë ˆì¼</a>
                        <a href="https://kr.hotels.com/" target="_blank" class="q-link">ğŸ¨ í˜¸í…”ìŠ¤ ë‹·ì»´</a>
                    </div>
                </div>
            </main>

            <main id="page-insurance">
                <div class="card">
                    <div class="card-header">ğŸ“„ 4ëŒ€ë³´í—˜ ì‹ ê³ </div>
                    <div class="card-body grid-2">
                        <a href="https://www.4insure.or.kr" target="_blank" class="q-link">ğŸ›ï¸ 4ëŒ€ì‚¬íšŒë³´í—˜ ì •ë³´ì—°ê³„ì„¼í„°</a>
                        <a href="https://edi.nhis.or.kr" target="_blank" class="q-link">ğŸ¥ ê±´ê°•ë³´í—˜ EDI ì‹œìŠ¤í…œ</a>
                        <a href="https://total.kcomwel.or.kr" target="_blank" class="q-link">ğŸ‘· ê³ ìš©Â·ì‚°ì¬ í† íƒˆì„œë¹„ìŠ¤</a>
                        <a href="https://www.nps.or.kr" target="_blank" class="q-link">ğŸ’° êµ­ë¯¼ì—°ê¸ˆ EDI ì„œë¹„ìŠ¤</a>
                        <a href="https://hometax.go.kr" target="_blank" class="q-link">ğŸ§¾ êµ­ì„¸ì²­ í™ˆíƒìŠ¤</a>
                    </div>
                </div>
            </main>

            <main id="page-dinner">
                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">ğŸ´ íšŒì‹/ë‹¨ì²´ ì‹ì‚¬ ì¥ì†Œ</div>
                        <div class="card-body">
                            <label style="font-size:12px;">ì§€ì—­</label>
                            <input type="text" id="dinnerArea" class="input-box" placeholder="ì˜ˆ: íŒêµì—­">
                            <label style="font-size:12px;">ë©”ë‰´ ì¢…ë¥˜</label>
                            <select id="dinnerType" class="input-box">
                                <optgroup label="ê³ ê¸°/êµ¬ì´ë¥˜">
                                    <option value="ì‚¼ê²¹ì‚´ ë¼ì§€êµ¬ì´">ğŸ· ì‚¼ê²¹ì‚´/ë¼ì§€êµ¬ì´</option>
                                    <option value="ì†Œê³ ê¸° í•œìš°">ğŸ® ì†Œê³ ê¸°/í•œìš°</option>
                                    <option value="ê³±ì°½ ë§‰ì°½">ğŸ”¥ ê³±ì°½/ë§‰ì°½</option>
                                </optgroup>
                                <optgroup label="í•´ì‚°ë¬¼/ì¼ì‹">
                                    <option value="íšŸì§‘ ì¼ì‹">ğŸ£ íšŸì§‘/ì¼ì‹</option>
                                    <option value="ì°¸ì¹˜ ì „ë¬¸ì ">ğŸŸ ì°¸ì¹˜íšŒ</option>
                                    <option value="ì´ìì¹´ì•¼">ğŸ¶ ì´ìì¹´ì•¼</option>
                                </optgroup>
                                <optgroup label="ê¸°íƒ€">
                                    <option value="ì¤‘ì‹ ì½”ìŠ¤ ìš”ë¦¬">ğŸ¥¡ ì¤‘ì‹ ì½”ìŠ¤</option>
                                    <option value="ì´íƒˆë¦¬ì•ˆ íŒŒìŠ¤íƒ€">ğŸ ì–‘ì‹</option>
                                    <option value="í•œì •ì‹ ì½”ìŠ¤">ğŸ² í•œì •ì‹</option>
                                </optgroup>
                            </select>
                            <button class="btn-primary" onclick="searchDinner()">ë„¤ì´ë²„ ì§€ë„ ê²€ìƒ‰</button>
                        </div>
                    </div>
                    <div class="card" style="border-top: 4px solid var(--point-orange);">
                        <div class="card-header">â­ íšŒì‹ ë‹¨ê³¨ ì¥ì†Œ</div>
                        <div class="card-body">
                            <div style="display:flex; gap:5px; margin-bottom:10px;">
                                <input type="text" id="favName" class="input-box" placeholder="ì¥ì†Œëª…" style="margin:0;">
                                <button onclick="addFavorite()" style="background:var(--point-orange); color:white; border:none; border-radius:6px; padding:0 15px; cursor:pointer;">ì¶”ê°€</button>
                            </div>
                            <ul id="favoriteList" class="item-list"></ul>
                        </div>
                    </div>
                </div>
            </main>

            <main id="page-event">
                <div class="card">
                    <div class="card-header">ğŸ¢ ê¸°ì—… í–‰ì‚¬/ì›Œí¬ìƒµ ì¥ì†Œ </div>
                    <div class="card-body">
                        <div class="grid-2">
                            <div><label style="font-size:12px;">ì§€ì—­</label><input type="text" id="eventArea" class="input-box" placeholder="ì˜ˆ: ê°€í‰"></div>
                            <div><label style="font-size:12px;">ì¢…ë¥˜</label>
                                <select id="eventType" class="input-box">
                                    <option value="ëŒ€í˜• ì›Œí¬ìƒµ íœì…˜">ğŸ¡ ì›Œí¬ìƒµ ì „ìš© íœì…˜</option>
                                    <option value="í˜¸í…” ì»¨ë²¤ì…˜ ì—°íšŒì¥">ğŸ¨ í˜¸í…” ëŒ€ê´€/ì—°íšŒì¥</option>
                                    <option value="ëŒ€ê´€ ì„¸ë¯¸ë‚˜ì‹¤">ğŸ¤ ì„¸ë¯¸ë‚˜/ê°•ì˜ì‹¤</option>
                                </select>
                            </div>
                        </div>
                        <button class="btn-primary" style="background:#6366f1; margin-top:10px;" onclick="searchEvent()">í–‰ì‚¬ ì¥ì†Œ ê²€ìƒ‰</button>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        const ACCESS_PASSWORD = "1234";
        const firebaseConfig = { apiKey: "...", /* ê¸°ì¡´ ë³¸ì¸ ì •ë³´ ìœ ì§€ */ };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        let userNames = { slot1: "ì‚¬ìš©ì 1", slot2: "ì‚¬ìš©ì 2", slot3: "ì‚¬ìš©ì 3" };

        const SLACK_WEBHOOK_URL = "https://hooks.slack.com/services/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"; 

        // --- ì‹¤ì‹œê°„ ì‹œê°„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ ---
        function updateDateTime() {
            const now = new Date();
            document.getElementById('dateDisplay').textContent = now.toLocaleDateString('ko-KR', { 
                year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' 
            });
            document.getElementById('timeDisplay').textContent = now.toLocaleTimeString('ko-KR', { 
                hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' 
            });
        }
        setInterval(updateDateTime, 1000);

        function checkPassword() {
            if (document.getElementById('pwInput').value === ACCESS_PASSWORD) {
                document.getElementById('loginOverlay').style.display = 'none';
                document.getElementById('mainContent').classList.add('auth-success');
                updateDateTime();
                init(); 
            } else alert("ë¹„ë°€ë²ˆí˜¸ ì˜¤ë¥˜");
        }

        function showPage(id, btn) {
            document.querySelectorAll('main').forEach(m => m.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
            btn.classList.add('active');
        }

        async function init() {
            db.collection("settings").doc("usernames").onSnapshot(doc => {
                if(doc.exists()) {
                    userNames = doc.data();
                    for(let s in userNames) { if(document.getElementById(`opt-${s}`)) document.getElementById(`opt-${s}`).textContent = userNames[s]; }
                    updateView();
                }
            });
        }

        function updateView() {
            const s = document.getElementById('userSlot').value;
            document.getElementById('displayUserName').textContent = userNames[s];
            renderSchedules(); renderFavorites();
        }

        // --- [ìˆ˜ì • í•µì‹¬] ìŠ¬ë™ ì „ì†¡ ìµœì í™” í•¨ìˆ˜ ---
        async function sendSlackMessage() {
            const shop = document.getElementById('reqShop').value; 
            const user = document.getElementById('displayUserName').textContent;
            const now = new Date().toLocaleString('ko-KR');

            // ë¸Œë¼ìš°ì € ì°¨ë‹¨ì„ í”¼í•˜ê¸° ìœ„í•´ ë‹¨ìˆœ í…ìŠ¤íŠ¸ êµ¬ì¡°ë¡œ ë³€ê²½
            const payload = {
                text: `ğŸ“¦ *ë¹„í’ˆ êµ¬ë§¤ ìš”ì²­*\nâ€¢ ìš”ì²­ì: ${user}\nâ€¢ êµ¬ë§¤ì²˜: ${shop}\nâ€¢ ìš”ì²­ì‹œê°„: ${now}`
            };

            try {
                // no-cors ëª¨ë“œëŠ” ì‘ë‹µì„ ì½ì§€ëŠ” ëª»í•˜ì§€ë§Œ ì „ì†¡ ì„±ê³µë¥ ì´ ê°€ì¥ ë†’ìŠµë‹ˆë‹¤.
                await fetch(SLACK_WEBHOOK_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    cache: 'no-cache',
                    body: JSON.stringify(payload)
                });
                // ì „ì†¡ ëª…ë ¹ì´ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´ ì•Œë¦¼ ì¶œë ¥
                alert(`âœ… [${shop}] êµ¬ë§¤ ìš”ì²­ì´ ìŠ¬ë™ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!`);
            } catch (error) {
                console.error("Slack Error:", error);
                alert("ğŸ“¢ ì „ì†¡ ì¤‘ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            }
        }

        function trackPackage() { window.open(`https://search.naver.com/search.naver?query=${encodeURIComponent(document.getElementById('courier').value + ' ' + document.getElementById('trackNo').value)}`); }
        function searchDinner() { window.open(`https://map.naver.com/v5/search/${encodeURIComponent(document.getElementById('dinnerArea').value + ' ' + document.getElementById('dinnerType').value)}`); }
        function searchEvent() { window.open(`https://map.naver.com/v5/search/${encodeURIComponent(document.getElementById('eventArea').value + ' ' + document.getElementById('eventType').value)}`); }
        function switchUser() { updateView(); }

        async function renameUser() {
            const s = document.getElementById('userSlot').value;
            const n = prompt("ìƒˆ ì´ë¦„:", userNames[s]);
            if(n) { userNames[s] = n; await db.collection("settings").doc("usernames").set(userNames); }
        }

        async function addSchedule() {
            const s = document.getElementById('userSlot').value;
            const t = document.getElementById('schedTitle').value;
            const d = document.getElementById('schedDate').value;
            if(t && d) await db.collection("schedules").add({ slot:s, title:t, date:d });
            document.getElementById('schedTitle').value = "";
        }

        function renderSchedules() {
            const s = document.getElementById('userSlot').value;
            db.collection("schedules").where("slot","==",s).onSnapshot(qs => {
                document.getElementById('scheduleList').innerHTML = qs.docs.map(doc => `<li class="list-item"><span><b>${doc.data().date}</b> ${doc.data().title}</span><button onclick="db.collection('schedules').doc('${doc.id}').delete()">Ã—</button></li>`).join('');
            });
        }

        async function addFavorite() {
            const s = document.getElementById('userSlot').value;
            const n = document.getElementById('favName').value;
            if(n) await db.collection("favorites").add({ slot:s, name:n });
            document.getElementById('favName').value = "";
        }

        function renderFavorites() {
            const s = document.getElementById('userSlot').value;
            db.collection("favorites").where("slot","==",s).onSnapshot(qs => {
                document.getElementById('favoriteList').innerHTML = qs.docs.map(doc => `<li class="list-item"><span>${doc.data().name}</span><button onclick="db.collection('favorites').doc('${doc.id}').delete()">Ã—</button></li>`).join('');
            });
        }
    </script>
</body>
</html>
